var dl=Object.defineProperty;var gl=t=>{throw TypeError(t)};var ml=(t,e,n)=>e in t?dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>ml(t,typeof e!="symbol"?e+"":e,n);var Tn=(t,e,n)=>e.has(t)?gl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function bl(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ti(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const re={},dn=[],yt=()=>{},_l=()=>!1,Ur=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ni=t=>t.startsWith("onUpdate:"),je=Object.assign,ri=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yl=Object.prototype.hasOwnProperty,X=(t,e)=>yl.call(t,e),N=Array.isArray,gn=t=>Hr(t)==="[object Map]",qo=t=>Hr(t)==="[object Set]",F=t=>typeof t=="function",ye=t=>typeof t=="string",It=t=>typeof t=="symbol",ue=t=>t!==null&&typeof t=="object",Jo=t=>(ue(t)||F(t))&&F(t.then)&&F(t.catch),Xo=Object.prototype.toString,Hr=t=>Xo.call(t),xl=t=>Hr(t).slice(8,-1),Zo=t=>Hr(t)==="[object Object]",si=t=>ye(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Nn=ti(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wr=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},vl=/-(\w)/g,Nt=Wr(t=>t.replace(vl,(e,n)=>n?n.toUpperCase():"")),kl=/\B([A-Z])/g,Bt=Wr(t=>t.replace(kl,"-$1").toLowerCase()),Qo=Wr(t=>t.charAt(0).toUpperCase()+t.slice(1)),rs=Wr(t=>t?`on${Qo(t)}`:""),$t=(t,e)=>!Object.is(t,e),br=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ea=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Ts=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Wi;const Vr=()=>Wi||(Wi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gn(t){if(N(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=ye(r)?Rl(r):Gn(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(ye(t)||ue(t))return t}const Cl=/;(?![^(]*\))/g,Sl=/:([^]+)/,Tl=/\/\*[^]*?\*\//g;function Rl(t){const e={};return t.replace(Tl,"").split(Cl).forEach(n=>{if(n){const r=n.split(Sl);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Yn(t){let e="";if(ye(t))e=t;else if(N(t))for(let n=0;n<t.length;n++){const r=Yn(t[n]);r&&(e+=r+" ")}else if(ue(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const El="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pl=ti(El);function ta(t){return!!t||t===""}const na=t=>!!(t&&t.__v_isRef===!0),Jt=t=>ye(t)?t:t==null?"":N(t)||ue(t)&&(t.toString===Xo||!F(t.toString))?na(t)?Jt(t.value):JSON.stringify(t,ra,2):String(t),ra=(t,e)=>na(e)?ra(t,e.value):gn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[ss(r,i)+" =>"]=s,n),{})}:qo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ss(n))}:It(e)?ss(e):ue(e)&&!N(e)&&!Zo(e)?String(e):e,ss=(t,e="")=>{var n;return It(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ze;class Al{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ze,!e&&Ze&&(this.index=(Ze.scopes||(Ze.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ze;try{return Ze=this,e()}finally{Ze=n}}}on(){Ze=this}off(){Ze=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Il(){return Ze}let ie;const is=new WeakSet;class sa{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ze&&Ze.active&&Ze.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,is.has(this)&&(is.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||oa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vi(this),aa(this);const e=ie,n=lt;ie=this,lt=!0;try{return this.fn()}finally{ca(this),ie=e,lt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ai(e);this.deps=this.depsTail=void 0,Vi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?is.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rs(this)&&this.run()}get dirty(){return Rs(this)}}let ia=0,zn,Bn;function oa(t,e=!1){if(t.flags|=8,e){t.next=Bn,Bn=t;return}t.next=zn,zn=t}function ii(){ia++}function oi(){if(--ia>0)return;if(Bn){let e=Bn;for(Bn=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;zn;){let e=zn;for(zn=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function aa(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ca(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ai(r),wl(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Rs(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(la(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function la(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Kn))return;t.globalVersion=Kn;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Rs(t)){t.flags&=-3;return}const n=ie,r=lt;ie=t,lt=!0;try{aa(t);const s=t.fn(t._value);(e.version===0||$t(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ie=n,lt=r,ca(t),t.flags&=-3}}function ai(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ai(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function wl(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let lt=!0;const ua=[];function Ft(){ua.push(lt),lt=!1}function jt(){const t=ua.pop();lt=t===void 0?!0:t}function Vi(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ie;ie=void 0;try{e()}finally{ie=n}}}let Kn=0;class Ml{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ci{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ie||!lt||ie===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ie)n=this.activeLink=new Ml(ie,this),ie.deps?(n.prevDep=ie.depsTail,ie.depsTail.nextDep=n,ie.depsTail=n):ie.deps=ie.depsTail=n,fa(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ie.depsTail,n.nextDep=void 0,ie.depsTail.nextDep=n,ie.depsTail=n,ie.deps===n&&(ie.deps=r)}return n}trigger(e){this.version++,Kn++,this.notify(e)}notify(e){ii();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{oi()}}}function fa(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)fa(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Es=new WeakMap,Xt=Symbol(""),Ps=Symbol(""),qn=Symbol("");function Ae(t,e,n){if(lt&&ie){let r=Es.get(t);r||Es.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ci),s.map=r,s.key=n),s.track()}}function Pt(t,e,n,r,s,i){const o=Es.get(t);if(!o){Kn++;return}const a=c=>{c&&c.trigger()};if(ii(),e==="clear")o.forEach(a);else{const c=N(t),u=c&&si(n);if(c&&n==="length"){const l=Number(r);o.forEach((f,p)=>{(p==="length"||p===qn||!It(p)&&p>=l)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(qn)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Xt)),gn(t)&&a(o.get(Ps)));break;case"delete":c||(a(o.get(Xt)),gn(t)&&a(o.get(Ps)));break;case"set":gn(t)&&a(o.get(Xt));break}}oi()}function un(t){const e=J(t);return e===t?e:(Ae(e,"iterate",qn),it(t)?e:e.map(Ie))}function Gr(t){return Ae(t=J(t),"iterate",qn),t}const Dl={__proto__:null,[Symbol.iterator](){return os(this,Symbol.iterator,Ie)},concat(...t){return un(this).concat(...t.map(e=>N(e)?un(e):e))},entries(){return os(this,"entries",t=>(t[1]=Ie(t[1]),t))},every(t,e){return St(this,"every",t,e,void 0,arguments)},filter(t,e){return St(this,"filter",t,e,n=>n.map(Ie),arguments)},find(t,e){return St(this,"find",t,e,Ie,arguments)},findIndex(t,e){return St(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return St(this,"findLast",t,e,Ie,arguments)},findLastIndex(t,e){return St(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return St(this,"forEach",t,e,void 0,arguments)},includes(...t){return as(this,"includes",t)},indexOf(...t){return as(this,"indexOf",t)},join(t){return un(this).join(t)},lastIndexOf(...t){return as(this,"lastIndexOf",t)},map(t,e){return St(this,"map",t,e,void 0,arguments)},pop(){return Rn(this,"pop")},push(...t){return Rn(this,"push",t)},reduce(t,...e){return Gi(this,"reduce",t,e)},reduceRight(t,...e){return Gi(this,"reduceRight",t,e)},shift(){return Rn(this,"shift")},some(t,e){return St(this,"some",t,e,void 0,arguments)},splice(...t){return Rn(this,"splice",t)},toReversed(){return un(this).toReversed()},toSorted(t){return un(this).toSorted(t)},toSpliced(...t){return un(this).toSpliced(...t)},unshift(...t){return Rn(this,"unshift",t)},values(){return os(this,"values",Ie)}};function os(t,e,n){const r=Gr(t),s=r[e]();return r!==t&&!it(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const Ol=Array.prototype;function St(t,e,n,r,s,i){const o=Gr(t),a=o!==t&&!it(t),c=o[e];if(c!==Ol[e]){const f=c.apply(t,i);return a?Ie(f):f}let u=n;o!==t&&(a?u=function(f,p){return n.call(this,Ie(f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const l=c.call(o,u,r);return a&&s?s(l):l}function Gi(t,e,n,r){const s=Gr(t);let i=n;return s!==t&&(it(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Ie(a),c,t)}),s[e](i,...r)}function as(t,e,n){const r=J(t);Ae(r,"iterate",qn);const s=r[e](...n);return(s===-1||s===!1)&&hi(n[0])?(n[0]=J(n[0]),r[e](...n)):s}function Rn(t,e,n=[]){Ft(),ii();const r=J(t)[e].apply(t,n);return oi(),jt(),r}const Ll=ti("__proto__,__v_isRef,__isVue"),ha=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(It));function $l(t){It(t)||(t=String(t));const e=J(this);return Ae(e,"has",t),e.hasOwnProperty(t)}class pa{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Gl:ba:i?ma:ga).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=N(e);if(!s){let c;if(o&&(c=Dl[n]))return c;if(n==="hasOwnProperty")return $l}const a=Reflect.get(e,n,Me(e)?e:r);return(It(n)?ha.has(n):Ll(n))||(s||Ae(e,"get",n),i)?a:Me(a)?o&&si(n)?a:a.value:ue(a)?s?_a(a):ui(a):a}}class da extends pa{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=Qt(i);if(!it(r)&&!Qt(r)&&(i=J(i),r=J(r)),!N(e)&&Me(i)&&!Me(r))return c?!1:(i.value=r,!0)}const o=N(e)&&si(n)?Number(n)<e.length:X(e,n),a=Reflect.set(e,n,r,Me(e)?e:s);return e===J(s)&&(o?$t(r,i)&&Pt(e,"set",n,r):Pt(e,"add",n,r)),a}deleteProperty(e,n){const r=X(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Pt(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!It(n)||!ha.has(n))&&Ae(e,"has",n),r}ownKeys(e){return Ae(e,"iterate",N(e)?"length":Xt),Reflect.ownKeys(e)}}class Nl extends pa{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zl=new da,Bl=new Nl,Fl=new da(!0);const As=t=>t,fr=t=>Reflect.getPrototypeOf(t);function jl(t,e,n){return function(...r){const s=this.__v_raw,i=J(s),o=gn(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),l=n?As:e?Is:Ie;return!e&&Ae(i,"iterate",c?Ps:Xt),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[l(f[0]),l(f[1])]:l(f),done:p}},[Symbol.iterator](){return this}}}}function hr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ul(t,e){const n={get(s){const i=this.__v_raw,o=J(i),a=J(s);t||($t(s,a)&&Ae(o,"get",s),Ae(o,"get",a));const{has:c}=fr(o),u=e?As:t?Is:Ie;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Ae(J(s),"iterate",Xt),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=J(i),a=J(s);return t||($t(s,a)&&Ae(o,"has",s),Ae(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=J(a),u=e?As:t?Is:Ie;return!t&&Ae(c,"iterate",Xt),a.forEach((l,f)=>s.call(i,u(l),u(f),o))}};return je(n,t?{add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear")}:{add(s){!e&&!it(s)&&!Qt(s)&&(s=J(s));const i=J(this);return fr(i).has.call(i,s)||(i.add(s),Pt(i,"add",s,s)),this},set(s,i){!e&&!it(i)&&!Qt(i)&&(i=J(i));const o=J(this),{has:a,get:c}=fr(o);let u=a.call(o,s);u||(s=J(s),u=a.call(o,s));const l=c.call(o,s);return o.set(s,i),u?$t(i,l)&&Pt(o,"set",s,i):Pt(o,"add",s,i),this},delete(s){const i=J(this),{has:o,get:a}=fr(i);let c=o.call(i,s);c||(s=J(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&Pt(i,"delete",s,void 0),u},clear(){const s=J(this),i=s.size!==0,o=s.clear();return i&&Pt(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=jl(s,t,e)}),n}function li(t,e){const n=Ul(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(X(n,s)&&s in r?n:r,s,i)}const Hl={get:li(!1,!1)},Wl={get:li(!1,!0)},Vl={get:li(!0,!1)};const ga=new WeakMap,ma=new WeakMap,ba=new WeakMap,Gl=new WeakMap;function Yl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kl(t){return t.__v_skip||!Object.isExtensible(t)?0:Yl(xl(t))}function ui(t){return Qt(t)?t:fi(t,!1,zl,Hl,ga)}function ql(t){return fi(t,!1,Fl,Wl,ma)}function _a(t){return fi(t,!0,Bl,Vl,ba)}function fi(t,e,n,r,s){if(!ue(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=Kl(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function mn(t){return Qt(t)?mn(t.__v_raw):!!(t&&t.__v_isReactive)}function Qt(t){return!!(t&&t.__v_isReadonly)}function it(t){return!!(t&&t.__v_isShallow)}function hi(t){return t?!!t.__v_raw:!1}function J(t){const e=t&&t.__v_raw;return e?J(e):t}function Jl(t){return!X(t,"__v_skip")&&Object.isExtensible(t)&&ea(t,"__v_skip",!0),t}const Ie=t=>ue(t)?ui(t):t,Is=t=>ue(t)?_a(t):t;function Me(t){return t?t.__v_isRef===!0:!1}function _e(t){return Xl(t,!1)}function Xl(t,e){return Me(t)?t:new Zl(t,e)}class Zl{constructor(e,n){this.dep=new ci,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:J(e),this._value=n?e:Ie(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||it(e)||Qt(e);e=r?e:J(e),$t(e,n)&&(this._rawValue=e,this._value=r?e:Ie(e),this.dep.trigger())}}function Ql(t){return Me(t)?t.value:t}const eu={get:(t,e,n)=>e==="__v_raw"?t:Ql(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Me(s)&&!Me(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ya(t){return mn(t)?t:new Proxy(t,eu)}class tu{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ci(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Kn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ie!==this)return oa(this,!0),!0}get value(){const e=this.dep.track();return la(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nu(t,e,n=!1){let r,s;return F(t)?r=t:(r=t.get,s=t.set),new tu(r,s,n)}const pr={},Ir=new WeakMap;let Yt;function ru(t,e=!1,n=Yt){if(n){let r=Ir.get(n);r||Ir.set(n,r=[]),r.push(t)}}function su(t,e,n=re){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=A=>s?A:it(A)||s===!1||s===0?At(A,1):At(A);let l,f,p,d,v=!1,x=!1;if(Me(t)?(f=()=>t.value,v=it(t)):mn(t)?(f=()=>u(t),v=!0):N(t)?(x=!0,v=t.some(A=>mn(A)||it(A)),f=()=>t.map(A=>{if(Me(A))return A.value;if(mn(A))return u(A);if(F(A))return c?c(A,2):A()})):F(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Ft();try{p()}finally{jt()}}const A=Yt;Yt=l;try{return c?c(t,3,[d]):t(d)}finally{Yt=A}}:f=yt,e&&s){const A=f,Y=s===!0?1/0:s;f=()=>At(A(),Y)}const U=Il(),j=()=>{l.stop(),U&&U.active&&ri(U.effects,l)};if(i&&e){const A=e;e=(...Y)=>{A(...Y),j()}}let G=x?new Array(t.length).fill(pr):pr;const V=A=>{if(!(!(l.flags&1)||!l.dirty&&!A))if(e){const Y=l.run();if(s||v||(x?Y.some((pe,fe)=>$t(pe,G[fe])):$t(Y,G))){p&&p();const pe=Yt;Yt=l;try{const fe=[Y,G===pr?void 0:x&&G[0]===pr?[]:G,d];c?c(e,3,fe):e(...fe),G=Y}finally{Yt=pe}}}else l.run()};return a&&a(V),l=new sa(f),l.scheduler=o?()=>o(V,!1):V,d=A=>ru(A,!1,l),p=l.onStop=()=>{const A=Ir.get(l);if(A){if(c)c(A,4);else for(const Y of A)Y();Ir.delete(l)}},e?r?V(!0):G=l.run():o?o(V.bind(null,!0),!0):l.run(),j.pause=l.pause.bind(l),j.resume=l.resume.bind(l),j.stop=j,j}function At(t,e=1/0,n){if(e<=0||!ue(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Me(t))At(t.value,e,n);else if(N(t))for(let r=0;r<t.length;r++)At(t[r],e,n);else if(qo(t)||gn(t))t.forEach(r=>{At(r,e,n)});else if(Zo(t)){for(const r in t)At(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&At(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nr(t,e,n,r){try{return r?t(...r):t()}catch(s){Yr(s,e,n)}}function vt(t,e,n,r){if(F(t)){const s=nr(t,e,n,r);return s&&Jo(s)&&s.catch(i=>{Yr(i,e,n)}),s}if(N(t)){const s=[];for(let i=0;i<t.length;i++)s.push(vt(t[i],e,n,r));return s}}function Yr(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||re;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const l=a.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](t,c,u)===!1)return}a=a.parent}if(i){Ft(),nr(i,null,10,[t,c,u]),jt();return}}iu(t,n,s,r,o)}function iu(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const ze=[];let mt=-1;const bn=[];let Ot=null,hn=0;const xa=Promise.resolve();let wr=null;function va(t){const e=wr||xa;return t?e.then(this?t.bind(this):t):e}function ou(t){let e=mt+1,n=ze.length;for(;e<n;){const r=e+n>>>1,s=ze[r],i=Jn(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function pi(t){if(!(t.flags&1)){const e=Jn(t),n=ze[ze.length-1];!n||!(t.flags&2)&&e>=Jn(n)?ze.push(t):ze.splice(ou(e),0,t),t.flags|=1,ka()}}function ka(){wr||(wr=xa.then(Sa))}function au(t){N(t)?bn.push(...t):Ot&&t.id===-1?Ot.splice(hn+1,0,t):t.flags&1||(bn.push(t),t.flags|=1),ka()}function Yi(t,e,n=mt+1){for(;n<ze.length;n++){const r=ze[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ze.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ca(t){if(bn.length){const e=[...new Set(bn)].sort((n,r)=>Jn(n)-Jn(r));if(bn.length=0,Ot){Ot.push(...e);return}for(Ot=e,hn=0;hn<Ot.length;hn++){const n=Ot[hn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ot=null,hn=0}}const Jn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Sa(t){try{for(mt=0;mt<ze.length;mt++){const e=ze[mt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mt<ze.length;mt++){const e=ze[mt];e&&(e.flags&=-2)}mt=-1,ze.length=0,Ca(),wr=null,(ze.length||bn.length)&&Sa()}}let we=null,Ta=null;function Mr(t){const e=we;return we=t,Ta=t&&t.type.__scopeId||null,e}function cu(t,e=we,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ro(-1);const i=Mr(e);let o;try{o=t(...s)}finally{Mr(i),r._d&&ro(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ws(t,e){if(we===null)return t;const n=Xr(we),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=re]=e[s];i&&(F(i)&&(i={mounted:i,updated:i}),i.deep&&At(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Wt(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Ft(),vt(c,n,8,[t.el,a,t,e]),jt())}}const lu=Symbol("_vte"),uu=t=>t.__isTeleport;function di(t,e){t.shapeFlag&6&&t.component?(t.transition=e,di(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ra(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Dr(t,e,n,r,s=!1){if(N(t)){t.forEach((v,x)=>Dr(v,e&&(N(e)?e[x]:e),n,r,s));return}if(_n(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Dr(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Xr(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,l=a.refs===re?a.refs={}:a.refs,f=a.setupState,p=J(f),d=f===re?()=>!1:v=>X(p,v);if(u!=null&&u!==c&&(ye(u)?(l[u]=null,d(u)&&(f[u]=null)):Me(u)&&(u.value=null)),F(c))nr(c,a,12,[o,l]);else{const v=ye(c),x=Me(c);if(v||x){const U=()=>{if(t.f){const j=v?d(c)?f[c]:l[c]:c.value;s?N(j)&&ri(j,i):N(j)?j.includes(i)||j.push(i):v?(l[c]=[i],d(c)&&(f[c]=l[c])):(c.value=[i],t.k&&(l[t.k]=c.value))}else v?(l[c]=o,d(c)&&(f[c]=o)):x&&(c.value=o,t.k&&(l[t.k]=o))};o?(U.id=-1,Xe(U,n)):U()}}}Vr().requestIdleCallback;Vr().cancelIdleCallback;const _n=t=>!!t.type.__asyncLoader,Ea=t=>t.type.__isKeepAlive;function fu(t,e){Pa(t,"a",e)}function hu(t,e){Pa(t,"da",e)}function Pa(t,e,n=Be){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Kr(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ea(s.parent.vnode)&&pu(r,e,n,s),s=s.parent}}function pu(t,e,n,r){const s=Kr(e,t,r,!0);Ia(()=>{ri(r[e],s)},n)}function Kr(t,e,n=Be,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ft();const a=sr(n),c=vt(e,n,t,o);return a(),jt(),c});return r?s.unshift(i):s.push(i),i}}const wt=t=>(e,n=Be)=>{(!Zn||t==="sp")&&Kr(t,(...r)=>e(...r),n)},du=wt("bm"),rr=wt("m"),gu=wt("bu"),mu=wt("u"),Aa=wt("bum"),Ia=wt("um"),bu=wt("sp"),_u=wt("rtg"),yu=wt("rtc");function xu(t,e=Be){Kr("ec",t,e)}const vu=Symbol.for("v-ndc");function wa(t,e,n,r){let s;const i=n,o=N(t);if(o||ye(t)){const a=o&&mn(t);let c=!1;a&&(c=!it(t),t=Gr(t)),s=new Array(t.length);for(let u=0,l=t.length;u<l;u++)s[u]=e(c?Ie(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(ue(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const l=a[c];s[c]=e(t[l],l,c,i)}}else s=[];return s}function Ki(t,e,n={},r,s){if(we.ce||we.parent&&_n(we.parent)&&we.parent.ce)return e!=="default"&&(n.name=e),de(),$s(Ke,null,[et("slot",n,r)],64);let i=t[e];i&&i._c&&(i._d=!1),de();const o=i&&Ma(i(n)),a=n.key||o&&o.key,c=$s(Ke,{key:(a&&!It(a)?a:`_${e}`)+""},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Ma(t){return t.some(e=>mi(e)?!(e.type===zt||e.type===Ke&&!Ma(e.children)):!0)?t:null}const Ms=t=>t?ec(t)?Xr(t):Ms(t.parent):null,Fn=je(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ms(t.parent),$root:t=>Ms(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Oa(t),$forceUpdate:t=>t.f||(t.f=()=>{pi(t.update)}),$nextTick:t=>t.n||(t.n=va.bind(t.proxy)),$watch:t=>Uu.bind(t)}),cs=(t,e)=>t!==re&&!t.__isScriptSetup&&X(t,e),ku={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(cs(r,e))return o[e]=1,r[e];if(s!==re&&X(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&X(u,e))return o[e]=3,i[e];if(n!==re&&X(n,e))return o[e]=4,n[e];Ds&&(o[e]=0)}}const l=Fn[e];let f,p;if(l)return e==="$attrs"&&Ae(t.attrs,"get",""),l(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==re&&X(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,X(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return cs(s,e)?(s[e]=n,!0):r!==re&&X(r,e)?(r[e]=n,!0):X(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==re&&X(t,o)||cs(e,o)||(a=i[0])&&X(a,o)||X(r,o)||X(Fn,o)||X(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:X(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qi(t){return N(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ds=!0;function Cu(t){const e=Oa(t),n=t.proxy,r=t.ctx;Ds=!1,e.beforeCreate&&Ji(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:f,mounted:p,beforeUpdate:d,updated:v,activated:x,deactivated:U,beforeDestroy:j,beforeUnmount:G,destroyed:V,unmounted:A,render:Y,renderTracked:pe,renderTriggered:fe,errorCaptured:K,serverPrefetch:Se,expose:D,inheritAttrs:z,components:ge,directives:ut,filters:Ut}=e;if(u&&Su(u,r,null),o)for(const oe in o){const Q=o[oe];F(Q)&&(r[oe]=Q.bind(n))}if(s){const oe=s.call(n,n);ue(oe)&&(t.data=ui(oe))}if(Ds=!0,i)for(const oe in i){const Q=i[oe],kt=F(Q)?Q.bind(n,n):F(Q.get)?Q.get.bind(n,n):yt,Ht=!F(Q)&&F(Q.set)?Q.set.bind(n):yt,se=lf({get:kt,set:Ht});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>se.value,set:qe=>se.value=qe})}if(a)for(const oe in a)Da(a[oe],r,n,oe);if(c){const oe=F(c)?c.call(n):c;Reflect.ownKeys(oe).forEach(Q=>{$a(Q,oe[Q])})}l&&Ji(l,t,"c");function Te(oe,Q){N(Q)?Q.forEach(kt=>oe(kt.bind(n))):Q&&oe(Q.bind(n))}if(Te(du,f),Te(rr,p),Te(gu,d),Te(mu,v),Te(fu,x),Te(hu,U),Te(xu,K),Te(yu,pe),Te(_u,fe),Te(Aa,G),Te(Ia,A),Te(bu,Se),N(D))if(D.length){const oe=t.exposed||(t.exposed={});D.forEach(Q=>{Object.defineProperty(oe,Q,{get:()=>n[Q],set:kt=>n[Q]=kt})})}else t.exposed||(t.exposed={});Y&&t.render===yt&&(t.render=Y),z!=null&&(t.inheritAttrs=z),ge&&(t.components=ge),ut&&(t.directives=ut),Se&&Ra(t)}function Su(t,e,n=yt){N(t)&&(t=Os(t));for(const r in t){const s=t[r];let i;ue(s)?"default"in s?i=_r(s.from||r,s.default,!0):i=_r(s.from||r):i=_r(s),Me(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Ji(t,e,n){vt(N(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Da(t,e,n,r){let s=r.includes(".")?qa(n,r):()=>n[r];if(ye(t)){const i=e[t];F(i)&&us(s,i)}else if(F(t))us(s,t.bind(n));else if(ue(t))if(N(t))t.forEach(i=>Da(i,e,n,r));else{const i=F(t.handler)?t.handler.bind(n):e[t.handler];F(i)&&us(s,i,t)}}function Oa(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Or(c,u,o,!0)),Or(c,e,o)),ue(e)&&i.set(e,c),c}function Or(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Or(t,i,n,!0),s&&s.forEach(o=>Or(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Tu[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Tu={data:Xi,props:Zi,emits:Zi,methods:$n,computed:$n,beforeCreate:Ne,created:Ne,beforeMount:Ne,mounted:Ne,beforeUpdate:Ne,updated:Ne,beforeDestroy:Ne,beforeUnmount:Ne,destroyed:Ne,unmounted:Ne,activated:Ne,deactivated:Ne,errorCaptured:Ne,serverPrefetch:Ne,components:$n,directives:$n,watch:Eu,provide:Xi,inject:Ru};function Xi(t,e){return e?t?function(){return je(F(t)?t.call(this,this):t,F(e)?e.call(this,this):e)}:e:t}function Ru(t,e){return $n(Os(t),Os(e))}function Os(t){if(N(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ne(t,e){return t?[...new Set([].concat(t,e))]:e}function $n(t,e){return t?je(Object.create(null),t,e):e}function Zi(t,e){return t?N(t)&&N(e)?[...new Set([...t,...e])]:je(Object.create(null),qi(t),qi(e??{})):e}function Eu(t,e){if(!t)return e;if(!e)return t;const n=je(Object.create(null),t);for(const r in e)n[r]=Ne(t[r],e[r]);return n}function La(){return{app:null,config:{isNativeTag:_l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pu=0;function Au(t,e){return function(r,s=null){F(r)||(r=je({},r)),s!=null&&!ue(s)&&(s=null);const i=La(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:Pu++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:uf,get config(){return i.config},set config(l){},use(l,...f){return o.has(l)||(l&&F(l.install)?(o.add(l),l.install(u,...f)):F(l)&&(o.add(l),l(u,...f))),u},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),u},component(l,f){return f?(i.components[l]=f,u):i.components[l]},directive(l,f){return f?(i.directives[l]=f,u):i.directives[l]},mount(l,f,p){if(!c){const d=u._ceVNode||et(r,s);return d.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(d,l,p),c=!0,u._container=l,l.__vue_app__=u,Xr(d.component)}},onUnmount(l){a.push(l)},unmount(){c&&(vt(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,f){return i.provides[l]=f,u},runWithContext(l){const f=yn;yn=u;try{return l()}finally{yn=f}}};return u}}let yn=null;function $a(t,e){if(Be){let n=Be.provides;const r=Be.parent&&Be.parent.provides;r===n&&(n=Be.provides=Object.create(r)),n[t]=e}}function _r(t,e,n=!1){const r=Be||we;if(r||yn){const s=yn?yn._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&F(e)?e.call(r&&r.proxy):e}}const Na={},za=()=>Object.create(Na),Ba=t=>Object.getPrototypeOf(t)===Na;function Iu(t,e,n,r=!1){const s={},i=za();t.propsDefaults=Object.create(null),Fa(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:ql(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function wu(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=J(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let f=0;f<l.length;f++){let p=l[f];if(qr(t.emitsOptions,p))continue;const d=e[p];if(c)if(X(i,p))d!==i[p]&&(i[p]=d,u=!0);else{const v=Nt(p);s[v]=Ls(c,a,v,d,t,!1)}else d!==i[p]&&(i[p]=d,u=!0)}}}else{Fa(t,e,s,i)&&(u=!0);let l;for(const f in a)(!e||!X(e,f)&&((l=Bt(f))===f||!X(e,l)))&&(c?n&&(n[f]!==void 0||n[l]!==void 0)&&(s[f]=Ls(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!X(e,f))&&(delete i[f],u=!0)}u&&Pt(t.attrs,"set","")}function Fa(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Nn(c))continue;const u=e[c];let l;s&&X(s,l=Nt(c))?!i||!i.includes(l)?n[l]=u:(a||(a={}))[l]=u:qr(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=J(n),u=a||re;for(let l=0;l<i.length;l++){const f=i[l];n[f]=Ls(s,c,f,u[f],t,!X(u,f))}}return o}function Ls(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=X(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&F(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const l=sr(s);r=u[n]=c.call(null,e),l()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Bt(n))&&(r=!0))}return r}const Mu=new WeakMap;function ja(t,e,n=!1){const r=n?Mu:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!F(t)){const l=f=>{c=!0;const[p,d]=ja(f,e,!0);je(o,p),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!c)return ue(t)&&r.set(t,dn),dn;if(N(i))for(let l=0;l<i.length;l++){const f=Nt(i[l]);Qi(f)&&(o[f]=re)}else if(i)for(const l in i){const f=Nt(l);if(Qi(f)){const p=i[l],d=o[f]=N(p)||F(p)?{type:p}:je({},p),v=d.type;let x=!1,U=!0;if(N(v))for(let j=0;j<v.length;++j){const G=v[j],V=F(G)&&G.name;if(V==="Boolean"){x=!0;break}else V==="String"&&(U=!1)}else x=F(v)&&v.name==="Boolean";d[0]=x,d[1]=U,(x||X(d,"default"))&&a.push(f)}}const u=[o,a];return ue(t)&&r.set(t,u),u}function Qi(t){return t[0]!=="$"&&!Nn(t)}const Ua=t=>t[0]==="_"||t==="$stable",gi=t=>N(t)?t.map(bt):[bt(t)],Du=(t,e,n)=>{if(e._n)return e;const r=cu((...s)=>gi(e(...s)),n);return r._c=!1,r},Ha=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ua(s))continue;const i=t[s];if(F(i))e[s]=Du(s,i,r);else if(i!=null){const o=gi(i);e[s]=()=>o}}},Wa=(t,e)=>{const n=gi(e);t.slots.default=()=>n},Va=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},Ou=(t,e,n)=>{const r=t.slots=za();if(t.vnode.shapeFlag&32){const s=e._;s?(Va(r,e,n),n&&ea(r,"_",s,!0)):Ha(e,r)}else e&&Wa(t,e)},Lu=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=re;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Va(s,e,n):(i=!e.$stable,Ha(e,s)),o=e}else e&&(Wa(t,e),o={default:1});if(i)for(const a in s)!Ua(a)&&o[a]==null&&delete s[a]},Xe=qu;function $u(t){return Nu(t)}function Nu(t,e){const n=Vr();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:f,nextSibling:p,setScopeId:d=yt,insertStaticContent:v}=t,x=(h,g,b,k=null,_=null,y=null,E=void 0,T=null,R=!!g.dynamicChildren)=>{if(h===g)return;h&&!En(h,g)&&(k=Mt(h),qe(h,_,y,!0),h=null),g.patchFlag===-2&&(R=!1,g.dynamicChildren=null);const{type:C,ref:$,shapeFlag:P}=g;switch(C){case Jr:U(h,g,b,k);break;case zt:j(h,g,b,k);break;case fs:h==null&&G(g,b,k,E);break;case Ke:ge(h,g,b,k,_,y,E,T,R);break;default:P&1?Y(h,g,b,k,_,y,E,T,R):P&6?ut(h,g,b,k,_,y,E,T,R):(P&64||P&128)&&C.process(h,g,b,k,_,y,E,T,R,Dt)}$!=null&&_&&Dr($,h&&h.ref,y,g||h,!g)},U=(h,g,b,k)=>{if(h==null)r(g.el=a(g.children),b,k);else{const _=g.el=h.el;g.children!==h.children&&u(_,g.children)}},j=(h,g,b,k)=>{h==null?r(g.el=c(g.children||""),b,k):g.el=h.el},G=(h,g,b,k)=>{[h.el,h.anchor]=v(h.children,g,b,k,h.el,h.anchor)},V=({el:h,anchor:g},b,k)=>{let _;for(;h&&h!==g;)_=p(h),r(h,b,k),h=_;r(g,b,k)},A=({el:h,anchor:g})=>{let b;for(;h&&h!==g;)b=p(h),s(h),h=b;s(g)},Y=(h,g,b,k,_,y,E,T,R)=>{g.type==="svg"?E="svg":g.type==="math"&&(E="mathml"),h==null?pe(g,b,k,_,y,E,T,R):Se(h,g,_,y,E,T,R)},pe=(h,g,b,k,_,y,E,T)=>{let R,C;const{props:$,shapeFlag:P,transition:M,dirs:L}=h;if(R=h.el=o(h.type,y,$&&$.is,$),P&8?l(R,h.children):P&16&&K(h.children,R,null,k,_,ls(h,y),E,T),L&&Wt(h,null,k,"created"),fe(R,h,h.scopeId,E,k),$){for(const ee in $)ee!=="value"&&!Nn(ee)&&i(R,ee,null,$[ee],y,k);"value"in $&&i(R,"value",null,$.value,y),(C=$.onVnodeBeforeMount)&&dt(C,k,h)}L&&Wt(h,null,k,"beforeMount");const B=zu(_,M);B&&M.beforeEnter(R),r(R,g,b),((C=$&&$.onVnodeMounted)||B||L)&&Xe(()=>{C&&dt(C,k,h),B&&M.enter(R),L&&Wt(h,null,k,"mounted")},_)},fe=(h,g,b,k,_)=>{if(b&&d(h,b),k)for(let y=0;y<k.length;y++)d(h,k[y]);if(_){let y=_.subTree;if(g===y||Xa(y.type)&&(y.ssContent===g||y.ssFallback===g)){const E=_.vnode;fe(h,E,E.scopeId,E.slotScopeIds,_.parent)}}},K=(h,g,b,k,_,y,E,T,R=0)=>{for(let C=R;C<h.length;C++){const $=h[C]=T?Lt(h[C]):bt(h[C]);x(null,$,g,b,k,_,y,E,T)}},Se=(h,g,b,k,_,y,E)=>{const T=g.el=h.el;let{patchFlag:R,dynamicChildren:C,dirs:$}=g;R|=h.patchFlag&16;const P=h.props||re,M=g.props||re;let L;if(b&&Vt(b,!1),(L=M.onVnodeBeforeUpdate)&&dt(L,b,g,h),$&&Wt(g,h,b,"beforeUpdate"),b&&Vt(b,!0),(P.innerHTML&&M.innerHTML==null||P.textContent&&M.textContent==null)&&l(T,""),C?D(h.dynamicChildren,C,T,b,k,ls(g,_),y):E||Q(h,g,T,null,b,k,ls(g,_),y,!1),R>0){if(R&16)z(T,P,M,b,_);else if(R&2&&P.class!==M.class&&i(T,"class",null,M.class,_),R&4&&i(T,"style",P.style,M.style,_),R&8){const B=g.dynamicProps;for(let ee=0;ee<B.length;ee++){const q=B[ee],Ee=P[q],xe=M[q];(xe!==Ee||q==="value")&&i(T,q,Ee,xe,_,b)}}R&1&&h.children!==g.children&&l(T,g.children)}else!E&&C==null&&z(T,P,M,b,_);((L=M.onVnodeUpdated)||$)&&Xe(()=>{L&&dt(L,b,g,h),$&&Wt(g,h,b,"updated")},k)},D=(h,g,b,k,_,y,E)=>{for(let T=0;T<g.length;T++){const R=h[T],C=g[T],$=R.el&&(R.type===Ke||!En(R,C)||R.shapeFlag&70)?f(R.el):b;x(R,C,$,null,k,_,y,E,!0)}},z=(h,g,b,k,_)=>{if(g!==b){if(g!==re)for(const y in g)!Nn(y)&&!(y in b)&&i(h,y,g[y],null,_,k);for(const y in b){if(Nn(y))continue;const E=b[y],T=g[y];E!==T&&y!=="value"&&i(h,y,T,E,_,k)}"value"in b&&i(h,"value",g.value,b.value,_)}},ge=(h,g,b,k,_,y,E,T,R)=>{const C=g.el=h?h.el:a(""),$=g.anchor=h?h.anchor:a("");let{patchFlag:P,dynamicChildren:M,slotScopeIds:L}=g;L&&(T=T?T.concat(L):L),h==null?(r(C,b,k),r($,b,k),K(g.children||[],b,$,_,y,E,T,R)):P>0&&P&64&&M&&h.dynamicChildren?(D(h.dynamicChildren,M,b,_,y,E,T),(g.key!=null||_&&g===_.subTree)&&Ga(h,g,!0)):Q(h,g,b,$,_,y,E,T,R)},ut=(h,g,b,k,_,y,E,T,R)=>{g.slotScopeIds=T,h==null?g.shapeFlag&512?_.ctx.activate(g,b,k,E,R):Ut(g,b,k,_,y,E,R):or(h,g,R)},Ut=(h,g,b,k,_,y,E)=>{const T=h.component=nf(h,k,_);if(Ea(h)&&(T.ctx.renderer=Dt),rf(T,!1,E),T.asyncDep){if(_&&_.registerDep(T,Te,E),!h.el){const R=T.subTree=et(zt);j(null,R,g,b)}}else Te(T,h,g,b,_,y,E)},or=(h,g,b)=>{const k=g.component=h.component;if(Yu(h,g,b))if(k.asyncDep&&!k.asyncResolved){oe(k,g,b);return}else k.next=g,k.update();else g.el=h.el,k.vnode=g},Te=(h,g,b,k,_,y,E)=>{const T=()=>{if(h.isMounted){let{next:P,bu:M,u:L,parent:B,vnode:ee}=h;{const Oe=Ya(h);if(Oe){P&&(P.el=ee.el,oe(h,P,E)),Oe.asyncDep.then(()=>{h.isUnmounted||T()});return}}let q=P,Ee;Vt(h,!1),P?(P.el=ee.el,oe(h,P,E)):P=ee,M&&br(M),(Ee=P.props&&P.props.onVnodeBeforeUpdate)&&dt(Ee,B,P,ee),Vt(h,!0);const xe=to(h),Je=h.subTree;h.subTree=xe,x(Je,xe,f(Je.el),Mt(Je),h,_,y),P.el=xe.el,q===null&&Ku(h,xe.el),L&&Xe(L,_),(Ee=P.props&&P.props.onVnodeUpdated)&&Xe(()=>dt(Ee,B,P,ee),_)}else{let P;const{el:M,props:L}=g,{bm:B,m:ee,parent:q,root:Ee,type:xe}=h,Je=_n(g);Vt(h,!1),B&&br(B),!Je&&(P=L&&L.onVnodeBeforeMount)&&dt(P,q,g),Vt(h,!0);{Ee.ce&&Ee.ce._injectChildStyle(xe);const Oe=h.subTree=to(h);x(null,Oe,b,k,h,_,y),g.el=Oe.el}if(ee&&Xe(ee,_),!Je&&(P=L&&L.onVnodeMounted)){const Oe=g;Xe(()=>dt(P,q,Oe),_)}(g.shapeFlag&256||q&&_n(q.vnode)&&q.vnode.shapeFlag&256)&&h.a&&Xe(h.a,_),h.isMounted=!0,g=b=k=null}};h.scope.on();const R=h.effect=new sa(T);h.scope.off();const C=h.update=R.run.bind(R),$=h.job=R.runIfDirty.bind(R);$.i=h,$.id=h.uid,R.scheduler=()=>pi($),Vt(h,!0),C()},oe=(h,g,b)=>{g.component=h;const k=h.vnode.props;h.vnode=g,h.next=null,wu(h,g.props,k,b),Lu(h,g.children,b),Ft(),Yi(h),jt()},Q=(h,g,b,k,_,y,E,T,R=!1)=>{const C=h&&h.children,$=h?h.shapeFlag:0,P=g.children,{patchFlag:M,shapeFlag:L}=g;if(M>0){if(M&128){Ht(C,P,b,k,_,y,E,T,R);return}else if(M&256){kt(C,P,b,k,_,y,E,T,R);return}}L&8?($&16&&at(C,_,y),P!==C&&l(b,P)):$&16?L&16?Ht(C,P,b,k,_,y,E,T,R):at(C,_,y,!0):($&8&&l(b,""),L&16&&K(P,b,k,_,y,E,T,R))},kt=(h,g,b,k,_,y,E,T,R)=>{h=h||dn,g=g||dn;const C=h.length,$=g.length,P=Math.min(C,$);let M;for(M=0;M<P;M++){const L=g[M]=R?Lt(g[M]):bt(g[M]);x(h[M],L,b,null,_,y,E,T,R)}C>$?at(h,_,y,!0,!1,P):K(g,b,k,_,y,E,T,R,P)},Ht=(h,g,b,k,_,y,E,T,R)=>{let C=0;const $=g.length;let P=h.length-1,M=$-1;for(;C<=P&&C<=M;){const L=h[C],B=g[C]=R?Lt(g[C]):bt(g[C]);if(En(L,B))x(L,B,b,null,_,y,E,T,R);else break;C++}for(;C<=P&&C<=M;){const L=h[P],B=g[M]=R?Lt(g[M]):bt(g[M]);if(En(L,B))x(L,B,b,null,_,y,E,T,R);else break;P--,M--}if(C>P){if(C<=M){const L=M+1,B=L<$?g[L].el:k;for(;C<=M;)x(null,g[C]=R?Lt(g[C]):bt(g[C]),b,B,_,y,E,T,R),C++}}else if(C>M)for(;C<=P;)qe(h[C],_,y,!0),C++;else{const L=C,B=C,ee=new Map;for(C=B;C<=M;C++){const be=g[C]=R?Lt(g[C]):bt(g[C]);be.key!=null&&ee.set(be.key,C)}let q,Ee=0;const xe=M-B+1;let Je=!1,Oe=0;const ft=new Array(xe);for(C=0;C<xe;C++)ft[C]=0;for(C=L;C<=P;C++){const be=h[C];if(Ee>=xe){qe(be,_,y,!0);continue}let Ve;if(be.key!=null)Ve=ee.get(be.key);else for(q=B;q<=M;q++)if(ft[q-B]===0&&En(be,g[q])){Ve=q;break}Ve===void 0?qe(be,_,y,!0):(ft[Ve-B]=C+1,Ve>=Oe?Oe=Ve:Je=!0,x(be,g[Ve],b,null,_,y,E,T,R),Ee++)}const tt=Je?Bu(ft):dn;for(q=tt.length-1,C=xe-1;C>=0;C--){const be=B+C,Ve=g[be],cn=be+1<$?g[be+1].el:k;ft[C]===0?x(null,Ve,b,cn,_,y,E,T,R):Je&&(q<0||C!==tt[q]?se(Ve,b,cn,2):q--)}}},se=(h,g,b,k,_=null)=>{const{el:y,type:E,transition:T,children:R,shapeFlag:C}=h;if(C&6){se(h.component.subTree,g,b,k);return}if(C&128){h.suspense.move(g,b,k);return}if(C&64){E.move(h,g,b,Dt);return}if(E===Ke){r(y,g,b);for(let P=0;P<R.length;P++)se(R[P],g,b,k);r(h.anchor,g,b);return}if(E===fs){V(h,g,b);return}if(k!==2&&C&1&&T)if(k===0)T.beforeEnter(y),r(y,g,b),Xe(()=>T.enter(y),_);else{const{leave:P,delayLeave:M,afterLeave:L}=T,B=()=>r(y,g,b),ee=()=>{P(y,()=>{B(),L&&L()})};M?M(y,B,ee):ee()}else r(y,g,b)},qe=(h,g,b,k=!1,_=!1)=>{const{type:y,props:E,ref:T,children:R,dynamicChildren:C,shapeFlag:$,patchFlag:P,dirs:M,cacheIndex:L}=h;if(P===-2&&(_=!1),T!=null&&Dr(T,null,b,h,!0),L!=null&&(g.renderCache[L]=void 0),$&256){g.ctx.deactivate(h);return}const B=$&1&&M,ee=!_n(h);let q;if(ee&&(q=E&&E.onVnodeBeforeUnmount)&&dt(q,g,h),$&6)ce(h.component,b,k);else{if($&128){h.suspense.unmount(b,k);return}B&&Wt(h,null,g,"beforeUnmount"),$&64?h.type.remove(h,g,b,Dt,k):C&&!C.hasOnce&&(y!==Ke||P>0&&P&64)?at(C,g,b,!1,!0):(y===Ke&&P&384||!_&&$&16)&&at(R,g,b),k&&me(h)}(ee&&(q=E&&E.onVnodeUnmounted)||B)&&Xe(()=>{q&&dt(q,g,h),B&&Wt(h,null,g,"unmounted")},b)},me=h=>{const{type:g,el:b,anchor:k,transition:_}=h;if(g===Ke){ar(b,k);return}if(g===fs){A(h);return}const y=()=>{s(b),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(h.shapeFlag&1&&_&&!_.persisted){const{leave:E,delayLeave:T}=_,R=()=>E(b,y);T?T(h.el,y,R):R()}else y()},ar=(h,g)=>{let b;for(;h!==g;)b=p(h),s(h),h=b;s(g)},ce=(h,g,b)=>{const{bum:k,scope:_,job:y,subTree:E,um:T,m:R,a:C}=h;eo(R),eo(C),k&&br(k),_.stop(),y&&(y.flags|=8,qe(E,h,g,b)),T&&Xe(T,g),Xe(()=>{h.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},at=(h,g,b,k=!1,_=!1,y=0)=>{for(let E=y;E<h.length;E++)qe(h[E],g,b,k,_)},Mt=h=>{if(h.shapeFlag&6)return Mt(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const g=p(h.anchor||h.el),b=g&&g[lu];return b?p(b):g};let on=!1;const an=(h,g,b)=>{h==null?g._vnode&&qe(g._vnode,null,null,!0):x(g._vnode||null,h,g,null,null,null,b),g._vnode=h,on||(on=!0,Yi(),Ca(),on=!1)},Dt={p:x,um:qe,m:se,r:me,mt:Ut,mc:K,pc:Q,pbc:D,n:Mt,o:t};return{render:an,hydrate:void 0,createApp:Au(an)}}function ls({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vt({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function zu(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ga(t,e,n=!1){const r=t.children,s=e.children;if(N(r)&&N(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Lt(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Ga(o,a)),a.type===Jr&&(a.el=o.el)}}function Bu(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ya(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ya(e)}function eo(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Fu=Symbol.for("v-scx"),ju=()=>_r(Fu);function us(t,e,n){return Ka(t,e,n)}function Ka(t,e,n=re){const{immediate:r,deep:s,flush:i,once:o}=n,a=je({},n),c=e&&r||!e&&i!=="post";let u;if(Zn){if(i==="sync"){const d=ju();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!c){const d=()=>{};return d.stop=yt,d.resume=yt,d.pause=yt,d}}const l=Be;a.call=(d,v,x)=>vt(d,l,v,x);let f=!1;i==="post"?a.scheduler=d=>{Xe(d,l&&l.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(d,v)=>{v?d():pi(d)}),a.augmentJob=d=>{e&&(d.flags|=4),f&&(d.flags|=2,l&&(d.id=l.uid,d.i=l))};const p=su(t,e,a);return Zn&&(u?u.push(p):c&&p()),p}function Uu(t,e,n){const r=this.proxy,s=ye(t)?t.includes(".")?qa(r,t):()=>r[t]:t.bind(r,r);let i;F(e)?i=e:(i=e.handler,n=e);const o=sr(this),a=Ka(s,i.bind(r),n);return o(),a}function qa(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Hu=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Nt(e)}Modifiers`]||t[`${Bt(e)}Modifiers`];function Wu(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||re;let s=n;const i=e.startsWith("update:"),o=i&&Hu(r,e.slice(7));o&&(o.trim&&(s=n.map(l=>ye(l)?l.trim():l)),o.number&&(s=n.map(Ts)));let a,c=r[a=rs(e)]||r[a=rs(Nt(e))];!c&&i&&(c=r[a=rs(Bt(e))]),c&&vt(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,vt(u,t,6,s)}}function Ja(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!F(t)){const c=u=>{const l=Ja(u,e,!0);l&&(a=!0,je(o,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(ue(t)&&r.set(t,null),null):(N(i)?i.forEach(c=>o[c]=null):je(o,i),ue(t)&&r.set(t,o),o)}function qr(t,e){return!t||!Ur(e)?!1:(e=e.slice(2).replace(/Once$/,""),X(t,e[0].toLowerCase()+e.slice(1))||X(t,Bt(e))||X(t,e))}function to(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:l,props:f,data:p,setupState:d,ctx:v,inheritAttrs:x}=t,U=Mr(t);let j,G;try{if(n.shapeFlag&4){const A=s||r,Y=A;j=bt(u.call(Y,A,l,f,d,p,v)),G=a}else{const A=e;j=bt(A.length>1?A(f,{attrs:a,slots:o,emit:c}):A(f,null)),G=e.props?a:Vu(a)}}catch(A){jn.length=0,Yr(A,t,1),j=et(zt)}let V=j;if(G&&x!==!1){const A=Object.keys(G),{shapeFlag:Y}=V;A.length&&Y&7&&(i&&A.some(ni)&&(G=Gu(G,i)),V=vn(V,G,!1,!0))}return n.dirs&&(V=vn(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&di(V,n.transition),j=V,Mr(U),j}const Vu=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ur(n))&&((e||(e={}))[n]=t[n]);return e},Gu=(t,e)=>{const n={};for(const r in t)(!ni(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Yu(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?no(r,o,u):!!o;if(c&8){const l=e.dynamicProps;for(let f=0;f<l.length;f++){const p=l[f];if(o[p]!==r[p]&&!qr(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?no(r,o,u):!0:!!o;return!1}function no(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!qr(n,i))return!0}return!1}function Ku({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Xa=t=>t.__isSuspense;function qu(t,e){e&&e.pendingBranch?N(t)?e.effects.push(...t):e.effects.push(t):au(t)}const Ke=Symbol.for("v-fgt"),Jr=Symbol.for("v-txt"),zt=Symbol.for("v-cmt"),fs=Symbol.for("v-stc"),jn=[];let Qe=null;function de(t=!1){jn.push(Qe=t?null:[])}function Ju(){jn.pop(),Qe=jn[jn.length-1]||null}let Xn=1;function ro(t,e=!1){Xn+=t,t<0&&Qe&&e&&(Qe.hasOnce=!0)}function Za(t){return t.dynamicChildren=Xn>0?Qe||dn:null,Ju(),Xn>0&&Qe&&Qe.push(t),t}function Ce(t,e,n,r,s,i){return Za(W(t,e,n,r,s,i,!0))}function $s(t,e,n,r,s){return Za(et(t,e,n,r,s,!0))}function mi(t){return t?t.__v_isVNode===!0:!1}function En(t,e){return t.type===e.type&&t.key===e.key}const Qa=({key:t})=>t??null,yr=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ye(t)||Me(t)||F(t)?{i:we,r:t,k:e,f:!!n}:t:null);function W(t,e=null,n=null,r=0,s=null,i=t===Ke?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Qa(e),ref:e&&yr(e),scopeId:Ta,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:we};return a?(_i(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=ye(n)?8:16),Xn>0&&!o&&Qe&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Qe.push(c),c}const et=Xu;function Xu(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===vu)&&(t=zt),mi(t)){const a=vn(t,e,!0);return n&&_i(a,n),Xn>0&&!i&&Qe&&(a.shapeFlag&6?Qe[Qe.indexOf(t)]=a:Qe.push(a)),a.patchFlag=-2,a}if(cf(t)&&(t=t.__vccOpts),e){e=Zu(e);let{class:a,style:c}=e;a&&!ye(a)&&(e.class=Yn(a)),ue(c)&&(hi(c)&&!N(c)&&(c=je({},c)),e.style=Gn(c))}const o=ye(t)?1:Xa(t)?128:uu(t)?64:ue(t)?4:F(t)?2:0;return W(t,e,n,r,s,o,i,!0)}function Zu(t){return t?hi(t)||Ba(t)?je({},t):t:null}function vn(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?Qu(s||{},e):s,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Qa(u),ref:e&&e.ref?n&&i?N(i)?i.concat(yr(e)):[i,yr(e)]:yr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ke?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vn(t.ssContent),ssFallback:t.ssFallback&&vn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&di(l,c.clone(l)),l}function bi(t=" ",e=0){return et(Jr,null,t,e)}function Zt(t="",e=!1){return e?(de(),$s(zt,null,t)):et(zt,null,t)}function bt(t){return t==null||typeof t=="boolean"?et(zt):N(t)?et(Ke,null,t.slice()):mi(t)?Lt(t):et(Jr,null,String(t))}function Lt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vn(t)}function _i(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(N(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),_i(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Ba(e)?e._ctx=we:s===3&&we&&(we.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else F(e)?(e={default:e,_ctx:we},n=32):(e=String(e),r&64?(n=16,e=[bi(e)]):n=8);t.children=e,t.shapeFlag|=n}function Qu(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Yn([e.class,r.class]));else if(s==="style")e.style=Gn([e.style,r.style]);else if(Ur(s)){const i=e[s],o=r[s];o&&i!==o&&!(N(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function dt(t,e,n,r=null){vt(t,e,7,[n,r])}const ef=La();let tf=0;function nf(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||ef,i={uid:tf++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Al(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ja(r,s),emitsOptions:Ja(r,s),emit:null,emitted:null,propsDefaults:re,inheritAttrs:r.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Wu.bind(null,i),t.ce&&t.ce(i),i}let Be=null,Lr,Ns;{const t=Vr(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Lr=e("__VUE_INSTANCE_SETTERS__",n=>Be=n),Ns=e("__VUE_SSR_SETTERS__",n=>Zn=n)}const sr=t=>{const e=Be;return Lr(t),t.scope.on(),()=>{t.scope.off(),Lr(e)}},so=()=>{Be&&Be.scope.off(),Lr(null)};function ec(t){return t.vnode.shapeFlag&4}let Zn=!1;function rf(t,e=!1,n=!1){e&&Ns(e);const{props:r,children:s}=t.vnode,i=ec(t);Iu(t,r,i,e),Ou(t,s,n);const o=i?sf(t,e):void 0;return e&&Ns(!1),o}function sf(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ku);const{setup:r}=n;if(r){Ft();const s=t.setupContext=r.length>1?af(t):null,i=sr(t),o=nr(r,t,0,[t.props,s]),a=Jo(o);if(jt(),i(),(a||t.sp)&&!_n(t)&&Ra(t),a){if(o.then(so,so),e)return o.then(c=>{io(t,c)}).catch(c=>{Yr(c,t,0)});t.asyncDep=o}else io(t,o)}else tc(t)}function io(t,e,n){F(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ue(e)&&(t.setupState=ya(e)),tc(t)}function tc(t,e,n){const r=t.type;t.render||(t.render=r.render||yt);{const s=sr(t);Ft();try{Cu(t)}finally{jt(),s()}}}const of={get(t,e){return Ae(t,"get",""),t[e]}};function af(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,of),slots:t.slots,emit:t.emit,expose:e}}function Xr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ya(Jl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fn)return Fn[n](t)},has(e,n){return n in e||n in Fn}})):t.proxy}function cf(t){return F(t)&&"__vccOpts"in t}const lf=(t,e)=>nu(t,e,Zn),uf="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zs;const oo=typeof window<"u"&&window.trustedTypes;if(oo)try{zs=oo.createPolicy("vue",{createHTML:t=>t})}catch{}const nc=zs?t=>zs.createHTML(t):t=>t,ff="http://www.w3.org/2000/svg",hf="http://www.w3.org/1998/Math/MathML",Et=typeof document<"u"?document:null,ao=Et&&Et.createElement("template"),pf={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Et.createElementNS(ff,t):e==="mathml"?Et.createElementNS(hf,t):n?Et.createElement(t,{is:n}):Et.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Et.createTextNode(t),createComment:t=>Et.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Et.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ao.innerHTML=nc(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=ao.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},df=Symbol("_vtc");function gf(t,e,n){const r=t[df];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const co=Symbol("_vod"),mf=Symbol("_vsh"),bf=Symbol(""),_f=/(^|;)\s*display\s*:/;function yf(t,e,n){const r=t.style,s=ye(n);let i=!1;if(n&&!s){if(e)if(ye(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&xr(r,a,"")}else for(const o in e)n[o]==null&&xr(r,o,"");for(const o in n)o==="display"&&(i=!0),xr(r,o,n[o])}else if(s){if(e!==n){const o=r[bf];o&&(n+=";"+o),r.cssText=n,i=_f.test(n)}}else e&&t.removeAttribute("style");co in t&&(t[co]=i?r.display:"",t[mf]&&(r.display="none"))}const lo=/\s*!important$/;function xr(t,e,n){if(N(n))n.forEach(r=>xr(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=xf(t,e);lo.test(n)?t.setProperty(Bt(r),n.replace(lo,""),"important"):t[r]=n}}const uo=["Webkit","Moz","ms"],hs={};function xf(t,e){const n=hs[e];if(n)return n;let r=Nt(e);if(r!=="filter"&&r in t)return hs[e]=r;r=Qo(r);for(let s=0;s<uo.length;s++){const i=uo[s]+r;if(i in t)return hs[e]=i}return e}const fo="http://www.w3.org/1999/xlink";function ho(t,e,n,r,s,i=Pl(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(fo,e.slice(6,e.length)):t.setAttributeNS(fo,e,n):n==null||i&&!ta(n)?t.removeAttribute(e):t.setAttribute(e,i?"":It(n)?String(n):n)}function po(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?nc(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=ta(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function pn(t,e,n,r){t.addEventListener(e,n,r)}function vf(t,e,n,r){t.removeEventListener(e,n,r)}const go=Symbol("_vei");function kf(t,e,n,r,s=null){const i=t[go]||(t[go]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=Cf(e);if(r){const u=i[e]=Rf(r,s);pn(t,a,u,c)}else o&&(vf(t,a,o,c),i[e]=void 0)}}const mo=/(?:Once|Passive|Capture)$/;function Cf(t){let e;if(mo.test(t)){e={};let r;for(;r=t.match(mo);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bt(t.slice(2)),e]}let ps=0;const Sf=Promise.resolve(),Tf=()=>ps||(Sf.then(()=>ps=0),ps=Date.now());function Rf(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;vt(Ef(r,n.value),e,5,[r])};return n.value=t,n.attached=Tf(),n}function Ef(t,e){if(N(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const bo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Pf=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?gf(t,r,o):e==="style"?yf(t,n,r):Ur(e)?ni(e)||kf(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Af(t,e,r,o))?(po(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ho(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ye(r))?po(t,Nt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ho(t,e,r,o))};function Af(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&bo(e)&&F(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return bo(e)&&ye(n)?!1:e in t}const _o=t=>{const e=t.props["onUpdate:modelValue"]||!1;return N(e)?n=>br(e,n):e};function If(t){t.target.composing=!0}function yo(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ds=Symbol("_assign"),Bs={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[ds]=_o(s);const i=r||s.props&&s.props.type==="number";pn(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Ts(a)),t[ds](a)}),n&&pn(t,"change",()=>{t.value=t.value.trim()}),e||(pn(t,"compositionstart",If),pn(t,"compositionend",yo),pn(t,"change",yo))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[ds]=_o(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Ts(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},wf=["ctrl","shift","alt","meta"],Mf={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wf.some(n=>t[`${n}Key`]&&!e.includes(n))},xo=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=Mf[e[o]];if(a&&a(s,e))return}return t(s,...i)})},Df={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rc=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Bt(s.key);if(e.some(o=>o===i||Df[o]===i))return t(s)})},Of=je({patchProp:Pf},pf);let vo;function Lf(){return vo||(vo=$u(Of))}const $f=(...t)=>{const e=Lf().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=zf(r);if(!s)return;const i=e._component;!F(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Nf(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Nf(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zf(t){return ye(t)?document.querySelector(t):t}class Bf{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return Ff(e).buffer}}function Ff(t){let e=0;for(const s of t)e+=s.byteLength;const n=new Uint8Array(e);let r=0;for(const s of t){const i=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);n.set(i,r),r+=s.byteLength}return n}function sc(t){return new jf(t).unpack()}function ic(t){const e=new Uf,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class jf{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,s="",i,o;for(;r<e;)i=n[r],i<160?(o=i,r++):(i^192)<32?(o=(i&31)<<6|n[r+1]&63,r+=2):(i^224)<16?(o=(i&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(i&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),s+=String.fromCodePoint(o);return this.index+=e,s}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const s=this.unpack();n[s]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,s=e&8388607|8388608;return(n===0?1:-1)*s*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,s=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(s-20)+n*2**(s-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class Uf{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=s=>{if(s<n){const i=this.pack(e[s]);return i instanceof Promise?i.then(()=>r(s+1)):r(s+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),s=e/2**r-1,i=Math.floor(s*2**52),o=2**32,a=n<<31|r+1023<<20|i/o&1048575,c=i%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const s=i=>{if(i<n.length){const o=n[i];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>s(i+1))}return s(i+1)}};return s(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Bf,this._textEncoder=new TextEncoder}}let oc=!0,ac=!0;function vr(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function tn(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return s.apply(this,arguments);const c=u=>{const l=n(u);l&&(a.handleEvent?a.handleEvent(l):a(l))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),s.apply(this,[o,c])};const i=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(a))return i.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Hf(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(oc=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Wf(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ac=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function cc(){if(typeof window=="object"){if(oc)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function yi(t,e){ac&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Vf(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(s=>s.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=vr(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=vr(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=vr(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function ko(t){return Object.prototype.toString.call(t)==="[object Object]"}function lc(t){return ko(t)?Object.keys(t).reduce(function(e,n){const r=ko(t[n]),s=r?lc(t[n]):t[n],i=r&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[n]:s})},{}):t}function Fs(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Fs(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(s=>{Fs(t,t.get(s),n)})}))}function Co(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&i.push(o)}),i.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&Fs(t,a,s)})}),s}const So=cc;function uc(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const l=typeof a[u]=="object"?a[u]:{ideal:a[u]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);const f=function(p,d){return p?p+d.charAt(0).toUpperCase()+d.slice(1):d==="deviceId"?"sourceId":d};if(l.ideal!==void 0){c.optional=c.optional||[];let p={};typeof l.ideal=="number"?(p[f("min",u)]=l.ideal,c.optional.push(p),p={},p[f("max",u)]=l.ideal,c.optional.push(p)):(p[f("",u)]=l.ideal,c.optional.push(p))}l.exact!==void 0&&typeof l.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=l.exact):["min","max"].forEach(p=>{l[p]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(p,u)]=l[p])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},s=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const u=function(l,f,p){f in l&&!(p in l)&&(l[p]=l[f],delete l[f])};a=JSON.parse(JSON.stringify(a)),u(a.audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let u=a.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const l=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!l)){delete a.video.facingMode;let f;if(u.exact==="environment"||u.ideal==="environment"?f=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(p=>{p=p.filter(v=>v.kind==="videoinput");let d=p.find(v=>f.some(x=>v.label.toLowerCase().includes(x)));return!d&&p.length&&f.includes("back")&&(d=p[p.length-1]),d&&(a.video.deviceId=u.exact?{exact:d.deviceId}:{ideal:d.deviceId}),a.video=r(a.video),So("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return So("chrome: "+JSON.stringify(a)),c(a)},i=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,u){s(a,l=>{n.webkitGetUserMedia(l,c,f=>{u&&u(i(f))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return s(c,u=>a(u).then(l=>{if(u.audio&&!l.getAudioTracks().length||u.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return l},l=>Promise.reject(i(l))))}}}function fc(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function hc(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(a=>a.track&&a.track.id===s.track.id):i={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(a=>a.track&&a.track.id===s.id):i={track:s};const o=new Event("track");o.track=s,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else tn(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function pc(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let u=s.apply(this,arguments);return u||(u=e(this,a),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){i.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function dc(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Co(o,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(i=>i._pc=this),s}),tn(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>Co(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let s,i,o;return this.getSenders().forEach(a=>{a.track===r&&(s?o=!0:s=a)}),this.getReceivers().forEach(a=>(a.track===r&&(i?o=!0:i=a),a.track===r)),o||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function gc(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(u=>a.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),s.apply(this,arguments)}}function mc(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return gc(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const l=n.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(f=>this._reverseStreams[f.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(d=>d.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){const f=new t.MediaStream(l.getTracks());this._streams[l.id]=f,this._reverseStreams[f.id]=l,l=f}r.apply(this,[l])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},t.RTCPeerConnection.prototype.addTrack=function(l,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(x=>x===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const v=this._streams[f.id];if(v)v.addTrack(l),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new t.MediaStream([l]);this._streams[f.id]=x,this._reverseStreams[x.id]=f,this.addStream(x)}return this.getSenders().find(x=>x.track===l)};function i(u,l){let f=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const d=u._reverseStreams[p],v=u._streams[d.id];f=f.replace(new RegExp(v.id,"g"),d.id)}),new RTCSessionDescription({type:l.type,sdp:f})}function o(u,l){let f=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const d=u._reverseStreams[p],v=u._streams[d.id];f=f.replace(new RegExp(d.id,"g"),v.id)}),new RTCSessionDescription({type:l.type,sdp:f})}["createOffer","createAnswer"].forEach(function(u){const l=t.RTCPeerConnection.prototype[u],f={[u](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[v=>{const x=i(this,v);p[0].apply(null,[x])},v=>{p[1]&&p[1].apply(null,v)},arguments[2]]):l.apply(this,arguments).then(v=>i(this,v))}};t.RTCPeerConnection.prototype[u]=f[u]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(l._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(d=>{this._streams[d].getTracks().find(x=>l.track===x)&&(p=this._streams[d])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function js(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=s[n]})}function bc(t,e){tn(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const To=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:bc,shimAddTrackRemoveTrack:mc,shimAddTrackRemoveTrackWithNative:gc,shimGetSendersWithDtmf:pc,shimGetUserMedia:uc,shimMediaStream:fc,shimOnTrack:hc,shimPeerConnection:js,shimSenderReceiverGetStats:dc},Symbol.toStringTag,{value:"Module"}));function _c(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(s,i,o){yi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(s).then(i,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const s=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return s(a,"mozAutoGainControl","autoGainControl"),s(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a,"autoGainControl","mozAutoGainControl"),s(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function Gf(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function yc(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Us(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=o[s]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,o,a]=arguments;return r.apply(this,[i||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((l,f)=>{c.set(f,Object.assign({},l,{type:n[l.type]||l.type}))})}return c}).then(o,a)}}function xc(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function vc(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),tn(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function kc(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){yi("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Cc(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Sc(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const s=r.length>0;s&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:o}=i,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function Tc(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Rc(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Ec(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Ro=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Sc,shimCreateAnswer:Ec,shimCreateOffer:Rc,shimGetDisplayMedia:Gf,shimGetParameters:Tc,shimGetUserMedia:_c,shimOnTrack:yc,shimPeerConnection:Us,shimRTCDataChannel:Cc,shimReceiverGetStats:vc,shimRemoveStream:kc,shimSenderGetStats:xc},Symbol.toStringTag,{value:"Module"}));function Pc(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const s=n.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function Ac(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function Ic(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,l){const f=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[f]);return l?(p.then(u,l),Promise.resolve()):p},e.createAnswer=function(u,l){const f=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[f]);return l?(p.then(u,l),Promise.resolve()):p};let a=function(c,u,l){const f=s.apply(this,[c]);return l?(f.then(u,l),Promise.resolve()):f};e.setLocalDescription=a,a=function(c,u,l){const f=i.apply(this,[c]);return l?(f.then(u,l),Promise.resolve()):f},e.setRemoteDescription=a,a=function(c,u,l){const f=o.apply(this,[c]);return l?(f.then(u,l),Promise.resolve()):f},e.addIceCandidate=a}function wc(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=s=>r(Mc(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,s,i){e.mediaDevices.getUserMedia(r).then(s,i)}).bind(e))}function Mc(t){return t&&t.video!==void 0?Object.assign({},t,{video:lc(t.video)}):t}function Dc(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const i=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(yi("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(r.iceServers[o])}r.iceServers=i}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Oc(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Lc(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function $c(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Eo=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:$c,shimCallbacksAPI:Ic,shimConstraints:Mc,shimCreateOfferLegacy:Lc,shimGetUserMedia:wc,shimLocalStreamsAPI:Pc,shimRTCIceServerUrls:Dc,shimRemoteStreamsAPI:Ac,shimTrackEventTransceiver:Oc},Symbol.toStringTag,{value:"Module"}));function Yf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gs={exports:{}},Po;function Kf(){return Po||(Po=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(s=>s.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let i=8;i<r.length;i+=2)switch(r[i]){case"raddr":s.relatedAddress=r[i+1];break;case"rport":s.relatedPort=parseInt(r[i+1],10);break;case"tcptype":s.tcpType=r[i+1];break;case"ufrag":s.ufrag=r[i+1],s.usernameFragment=r[i+1];break;default:s[r[i]]===void 0&&(s[r[i]]=r[i+1]);break}return s},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const s=n.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const s=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let s;const i=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)s=i[o].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(n){let r="",s=n.payloadType;if(n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const i=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?i.push(o+"="+n.parameters[o]):i.push(o)}),r+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",s=n.payloadType;return n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(i=>{r+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),s={ssrc:parseInt(n.substring(7,r),10)},i=n.indexOf(":",r);return i>-1?(s.attribute=n.substring(r+1,i),s.value=n.substring(i+1)):s.attribute=n.substring(r+1),s},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let s="a=setup:"+r+`\r
`;return n.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const s=e.matchPrefix(n+r,"a=ice-ufrag:")[0],i=e.matchPrefix(n+r,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n)[0].split(" ");r.profile=i[2];for(let a=3;a<i.length;a++){const c=i[a],u=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(u){const l=e.parseRtpMap(u),f=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(l.parameters=f.length?e.parseFmtp(f[0]):{},l.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(l.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(l=>l.type===c.type&&l.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let s="";s+="m="+n+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let i=0;return r.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(n){const r=[],s=e.parseRtpParameters(n),i=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),c=a.length>0&&a[0].ssrc;let u;const l=e.matchPrefix(n,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(v=>parseInt(v,10)));l.length>0&&l[0].length>1&&l[0][0]===c&&(u=l[0][1]),s.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let d={ssrc:c,codecPayloadType:parseInt(p.parameters.apt,10)};c&&u&&(d.rtx={ssrc:u}),r.push(d),i&&(d=JSON.parse(JSON.stringify(d)),d.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(d))}}),r.length===0&&c&&r.push({ssrc:c});let f=e.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(p=>{p.maxBitrate=f})),r},e.parseRtcpParameters=function(n){const r={},s=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const i=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=i.length>0,r.compound=i.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const s=e.matchPrefix(n,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const i=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return r=i[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),s=e.matchPrefix(n,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:i};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:i}}},e.writeSctpDescription=function(n,r){let s=[];return n.protocol!=="DTLS/SCTP"?s=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,s){let i;const o=r!==void 0?r:2;return n?i=n:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const s=e.splitLines(n);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const s=e.splitLines(n)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(n){const s=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},t.exports=e}(gs)),gs.exports}var Nc=Kf();const xn=Yf(Nc),qf=bl({__proto__:null,default:xn},[Nc]);function kr(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const s=new e(r),i=xn.parseCandidate(r.candidate);for(const o in i)o in s||Object.defineProperty(s,o,{value:i[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,tn(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Hs(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||tn(t,"icecandidate",e=>{if(e.candidate){const n=xn.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Cr(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=xn.splitSections(a.sdp);return c.shift(),c.some(u=>{const l=xn.parseMLine(u);return l&&l.kind==="application"&&l.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},i=function(a,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const l=xn.matchPrefix(a.sdp,"a=max-message-size:");return l.length>0?u=parseInt(l[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),u=s(c),l=i(arguments[0],c);let f;u===0&&l===0?f=Number.POSITIVE_INFINITY:u===0||l===0?f=Math.max(u,l):f=Math.min(u,l);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return f}}),this._sctp=p}return o.apply(this,arguments)}}function Sr(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,s){const i=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=n.apply(this,arguments);return e(s,this),s},tn(t,"datachannel",r=>(e(r.channel,r.target),r))}function Ws(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",s);i.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Vs(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return n.apply(this,arguments)}}function Tr(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Rr(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return n.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?n.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const Jf=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Vs,shimAddIceCandidateNullOrEmpty:Tr,shimConnectionState:Ws,shimMaxMessageSize:Cr,shimParameterlessSetLocalDescription:Rr,shimRTCIceCandidate:kr,shimRTCIceCandidateRelayProtocol:Hs,shimSendThrowTypeError:Sr},Symbol.toStringTag,{value:"Module"}));function Xf({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=cc,r=Vf(t),s={browserDetails:r,commonShim:Jf,extractVersion:vr,disableLog:Hf,disableWarnings:Wf,sdp:qf};switch(r.browser){case"chrome":if(!To||!js||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),s;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),s;n("adapter.js shimming chrome."),s.browserShim=To,Tr(t,r),Rr(t),uc(t,r),fc(t),js(t,r),hc(t),mc(t,r),pc(t),dc(t),bc(t,r),kr(t),Hs(t),Ws(t),Cr(t,r),Sr(t),Vs(t,r);break;case"firefox":if(!Ro||!Us||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=Ro,Tr(t,r),Rr(t),_c(t,r),Us(t,r),yc(t),kc(t),xc(t),vc(t),Cc(t),Sc(t),Tc(t),Rc(t),Ec(t),kr(t),Ws(t),Cr(t,r),Sr(t);break;case"safari":if(!Eo||!e.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=Eo,Tr(t,r),Rr(t),Dc(t),Lc(t),Ic(t),Pc(t),Ac(t),Oc(t),wc(t),$c(t),kr(t),Hs(t),Cr(t,r),Sr(t),Vs(t,r);break;default:n("Unsupported browser!");break}return s}const Ao=Xf({window:typeof window>"u"?void 0:window});function nn(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class zc{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,s=Math.ceil(r/this.chunkedMTU);let i=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),c=e.slice(o,a),u={__peerData:this._dataCount,n:i,data:c,total:s};n.push(u),o=a,i++}return this._dataCount++,n}}}function Zf(t){let e=0;for(const s of t)e+=s.byteLength;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.byteLength;return n}const ms=Ao.default||Ao,Pn=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return ms.browserDetails.browser}getVersion(){return ms.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=ms.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Qf=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),Bc=()=>Math.random().toString(36).slice(2),Io={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class eh extends zc{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(s){s.target&&n(s.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Io,this.browser=Pn.getBrowser(),this.browserVersion=Pn.getVersion(),this.pack=ic,this.unpack=sc,this.supports=function(){const n={browser:Pn.isBrowserSupported(),webRTC:Pn.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Io),n.audioVideo=!0;let s;try{s=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!s.ordered;try{s.binaryType="blob",n.binaryBlob=!Pn.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=Qf,this.randomToken=Bc}}const Ye=new eh,th="PeerJS: ";var wo;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(wo||(wo={}));class nh{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[th,...n];for(const s in r)r[s]instanceof Error&&(r[s]="("+r[s].name+") "+r[s].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var I=new nh,xi={},rh=Object.prototype.hasOwnProperty,Ue="~";function Qn(){}Object.create&&(Qn.prototype=Object.create(null),new Qn().__proto__||(Ue=!1));function sh(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Fc(t,e,n,r,s){if(typeof n!="function")throw new TypeError("The listener must be a function");var i=new sh(n,r||t,s),o=Ue?Ue+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],i]:t._events[o].push(i):(t._events[o]=i,t._eventsCount++),t}function Er(t,e){--t._eventsCount===0?t._events=new Qn:delete t._events[e]}function De(){this._events=new Qn,this._eventsCount=0}De.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)rh.call(n,r)&&e.push(Ue?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};De.prototype.listeners=function(e){var n=Ue?Ue+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o};De.prototype.listenerCount=function(e){var n=Ue?Ue+e:e,r=this._events[n];return r?r.fn?1:r.length:0};De.prototype.emit=function(e,n,r,s,i,o){var a=Ue?Ue+e:e;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,l,f;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,s),!0;case 5:return c.fn.call(c.context,n,r,s,i),!0;case 6:return c.fn.call(c.context,n,r,s,i,o),!0}for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];c.fn.apply(c.context,l)}else{var p=c.length,d;for(f=0;f<p;f++)switch(c[f].once&&this.removeListener(e,c[f].fn,void 0,!0),u){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,n);break;case 3:c[f].fn.call(c[f].context,n,r);break;case 4:c[f].fn.call(c[f].context,n,r,s);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c[f].fn.apply(c[f].context,l)}}return!0};De.prototype.on=function(e,n,r){return Fc(this,e,n,r,!1)};De.prototype.once=function(e,n,r){return Fc(this,e,n,r,!0)};De.prototype.removeListener=function(e,n,r,s){var i=Ue?Ue+e:e;if(!this._events[i])return this;if(!n)return Er(this,i),this;var o=this._events[i];if(o.fn)o.fn===n&&(!s||o.once)&&(!r||o.context===r)&&Er(this,i);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==n||s&&!o[a].once||r&&o[a].context!==r)&&c.push(o[a]);c.length?this._events[i]=c.length===1?c[0]:c:Er(this,i)}return this};De.prototype.removeAllListeners=function(e){var n;return e?(n=Ue?Ue+e:e,this._events[n]&&Er(this,n)):(this._events=new Qn,this._eventsCount=0),this};De.prototype.off=De.prototype.removeListener;De.prototype.addListener=De.prototype.on;De.prefixed=Ue;De.EventEmitter=De;xi=De;var rn={};nn(rn,"ConnectionType",()=>xt);nn(rn,"PeerErrorType",()=>he);nn(rn,"BaseConnectionErrorType",()=>er);nn(rn,"DataConnectionErrorType",()=>tr);nn(rn,"SerializationType",()=>kn);nn(rn,"SocketEventType",()=>_t);nn(rn,"ServerMessageType",()=>ke);var xt;(function(t){t.Data="data",t.Media="media"})(xt||(xt={}));var he;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(he||(he={}));var er;(function(t){t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed"})(er||(er={}));var tr;(function(t){t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big"})(tr||(tr={}));var kn;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw"})(kn||(kn={}));var _t;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(_t||(_t={}));var ke;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(ke||(ke={}));var vi={};vi=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class ih extends xi.EventEmitter{constructor(e,n,r,s,i,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+n+":"+r+s+"peerjs?key="+i}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+vi.version),this._disconnected=!1,this._socket.onmessage=s=>{let i;try{i=JSON.parse(s.data),I.log("Server message received:",i)}catch{I.log("Invalid server message",s.data);return}this.emit(_t.Message,i)},this._socket.onclose=s=>{this._disconnected||(I.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(_t.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),I.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){I.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ke.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(_t.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class jc{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===xt.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,s={ordered:!!e.reliable},i=n.createDataChannel(r.label,s);r._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){I.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,s=this.connection.type,i=this.connection.provider;I.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(I.log(`Received ICE candidates for ${n}:`,o.candidate),i.socket.send({type:ke.Candidate,payload:{candidate:o.candidate,type:s,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":I.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(er.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":I.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(er.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":I.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},I.log("Listening for data channel"),e.ondatachannel=o=>{I.log("Received data channel");const a=o.channel;i.getConnection(n,r)._initializeDataChannel(a)},I.log("Listening for remote stream"),e.ontrack=o=>{I.log("Received remote stream");const a=o.streams[0],c=i.getConnection(n,r);if(c.type===xt.Media){const u=c;this._addStreamToMediaConnection(a,u)}}}cleanup(){I.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const s=this.connection.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);I.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),I.log("Set localDescription:",r,`for:${this.connection.peer}`);let s={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===xt.Data){const i=this.connection;s={...s,label:i.label,reliable:i.reliable,serialization:i.serialization}}n.socket.send({type:ke.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(he.WebRTC,s),I.log("Failed to setLocalDescription, ",s))}}catch(r){n.emitError(he.WebRTC,r),I.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();I.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),I.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:ke.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){n.emitError(he.WebRTC,s),I.log("Failed to setLocalDescription, ",s)}}catch(r){n.emitError(he.WebRTC,r),I.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,s=this.connection.provider;I.log("Setting remote description",n);const i=this;try{await r.setRemoteDescription(n),I.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await i._makeAnswer()}catch(o){s.emitError(he.WebRTC,o),I.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){I.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),I.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(he.WebRTC,n),I.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(I.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return I.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){I.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class Uc extends xi.EventEmitter{emitError(e,n){I.error("Error:",n),this.emit("error",new oh(`${e}`,n))}}class oh extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class Hc extends Uc{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var Xs;const Wn=class Wn extends Hc{get type(){return xt.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Wn.ID_PREFIX+Ye.randomToken(),this._negotiator=new jc(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{I.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{I.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){I.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case ke.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case ke.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:I.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){I.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const s of r)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Xs=new WeakMap,Tn(Wn,Xs,Wn.ID_PREFIX="mc_");let $r=Wn;class ah{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:s,path:i,key:o}=this._options,a=new URL(`${n}://${r}:${s}${i}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",vi.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){I.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Ye.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Ye.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw I.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Zs,Qs;const qt=class qt extends Hc{get type(){return xt.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||qt.ID_PREFIX+Bc(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new jc(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{I.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{I.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{I.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(tr.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case ke.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case ke.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:I.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Zs=new WeakMap,Qs=new WeakMap,Tn(qt,Zs,qt.ID_PREFIX="dc_"),Tn(qt,Qs,qt.MAX_BUFFERED_AMOUNT=8388608);let Nr=qt;class ki extends Nr{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Nr.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return I.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class bs extends ki{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new zc,this.serialization=kn.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=sc(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const s=Zf(r.data);this._handleDataMessage({data:s})}}_send(e,n){const r=ic(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);I.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class ch extends ki{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=kn.None}}class lh extends ki{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Ye.chunkedMTU){this.emitError(tr.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=kn.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var ei;const Vn=class Vn extends Uc{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:ch,json:lh,binary:bs,"binary-utf8":bs,default:bs},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:Ye.CLOUD_HOST,port:Ye.CLOUD_PORT,path:"/",key:Vn.DEFAULT_KEY,token:Ye.randomToken(),config:Ye.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ye.CLOUD_HOST?this._options.secure=Ye.isSecure():this._options.host==Ye.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&I.setLogFunction(this._options.logFunction),I.logLevel=this._options.debug||0,this._api=new ah(n),this._socket=this._createServerConnection(),!Ye.supports.audioVideo&&!Ye.supports.data){this._delayedAbort(he.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Ye.validateId(r)){this._delayedAbort(he.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(he.ServerError,s))}_createServerConnection(){const e=new ih(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(_t.Message,n=>{this._handleMessage(n)}),e.on(_t.Error,n=>{this._abort(he.SocketError,n)}),e.on(_t.Disconnected,()=>{this.disconnected||(this.emitError(he.Network,"Lost connection to server."),this.disconnect())}),e.on(_t.Close,()=>{this.disconnected||this._abort(he.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,s=e.src;switch(n){case ke.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ke.Error:this._abort(he.ServerError,r.msg);break;case ke.IdTaken:this._abort(he.UnavailableID,`ID "${this.id}" is taken`);break;case ke.InvalidKey:this._abort(he.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ke.Leave:I.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case ke.Expire:this.emitError(he.PeerUnavailable,`Could not connect to peer ${s}`);break;case ke.Offer:{const i=r.connectionId;let o=this.getConnection(s,i);if(o&&(o.close(),I.warn(`Offer received for existing Connection ID:${i}`)),r.type===xt.Media){const c=new $r(s,this,{connectionId:i,_payload:r,metadata:r.metadata});o=c,this._addConnection(s,o),this.emit("call",c)}else if(r.type===xt.Data){const c=new this._serializers[r.serialization](s,this,{connectionId:i,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=c,this._addConnection(s,o),this.emit("connection",c)}else{I.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(i);for(const c of a)o.handleMessage(c);break}default:{if(!r){I.warn(`You received a malformed message from ${s} of type ${n}`);return}const i=r.connectionId,o=this.getConnection(s,i);o&&o.peerConnection?o.handleMessage(e):i?this._storeMessage(i,e):I.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){I.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(he.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){I.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(he.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){I.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new $r(e,this,{...r,_stream:n});return this._addConnection(e,s),s}_addConnection(e,n){I.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const s of r)if(s.connectionId===n)return s;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){I.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(I.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;I.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)I.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)I.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(he.ServerError,n))}};ei=new WeakMap,Tn(Vn,ei,Vn.DEFAULT_KEY="peerjs");let Gs=Vn;var Mo=Gs;class uh{constructor(e={}){this._peer=null,this._connections=new Map,this._eventListeners={data:[],connect:[],close:[]},this._roomId=null,this._user=e.user||{nickname:"Anonymous"},this._enableLogging=e.log||!1,this._options={host:"peerjs-vercel-gamma.vercel.app",port:443,path:"/peerjs",secure:!0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},debug:1},this._loadPromiseResolve=null,this._loadPromiseReject=null,this._loadPromise=new Promise((n,r)=>{this._loadPromiseResolve=n,this._loadPromiseReject=r})}_log(e,n){if(this._enableLogging){const r=JSON.stringify(this._user);n!==void 0?console.log(`[PeerConnectionManager][${r}] ${e}`,n):console.log(`[PeerConnectionManager][${r}] ${e}`)}}createRoom(){return new Promise((e,n)=>{this._peer&&this._peer.destroy(),this._log("Creating a new room..."),this._peer=new Mo(this._options),this._peer.on("open",r=>{this._roomId=r,this._setupPeerListeners(),this._log("Room created successfully",r),this._loadPromiseResolve(),e(r)}),this._peer.on("error",r=>{this._log("Peer creation error:",r),console.error("Peer creation error:",r),this._loadPromiseReject(r),n(r)})})}joinRoom(e){return new Promise((n,r)=>{this._peer&&this._peer.destroy(),this._log(`Joining room: ${e}`),this._peer=new Mo(this._options),this._peer.on("open",()=>{this._roomId=e;const s=this._peer.connect(e);s.on("open",()=>{this._setupConnectionListeners(s),this._connections.set(e,s),this._log(`Successfully joined room: ${e}`),this._loadPromiseResolve(),n()}),s.on("error",i=>{this._log("Connection error:",i),console.error("Connection error:",i),this._loadPromiseReject(i),r(i)})}),this._peer.on("error",s=>{this._log("Room join error:",s),console.error("Room join error:",s),this._loadPromiseReject(s),r(s)}),this._setupPeerListeners()})}async send(e){if(!this._peer)throw new Error("Not connected to a room");await this._loadPromise;const n={data:e,user:this._user};this._log("Sending data to all connections",n),this._connections.forEach(r=>{r.send(n)})}on(e,n){if(!this._eventListeners[e])throw new Error(`Unsupported event: ${e}`);this._log(`Registered listener for event: ${e}`),this._eventListeners[e].push(n)}close(){this._peer&&(this._log("Closing connections and cleaning up"),this._peer.destroy(),this._peer=null,this._connections.clear())}_setupPeerListeners(){this._peer.on("connection",e=>{this._log(`New incoming connection from: ${e.peer}`),this._setupConnectionListeners(e)})}_setupConnectionListeners(e){this._connections.set(e.peer,e),this._log(`Setting up listeners for connection: ${e.peer}`),e.on("data",n=>{const{data:r,user:s}=n;this._log(`Received data from ${e.peer}:`,n),this._eventListeners.data.forEach(i=>i(r,s,e.peer))}),e.on("open",()=>{this._log(`Connection opened with: ${e.peer}`),this._eventListeners.connect.forEach(n=>n(e.peer))}),e.on("close",()=>{this._log(`Connection closed with: ${e.peer}`),this._connections.delete(e.peer),this._eventListeners.close.forEach(n=>n(e.peer))})}getId(){return this._roomId}getUser(){return this._user}}const le=new uh({user:{name:"User "+Math.random().toString(36).substring(2,15)},log:!0}),fh={class:"pane panes panes-v","data-panes":"3,1"},hh={class:"pane flex"},ph={key:0,class:"flex-1 bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-500 dark:text-gray-400 border border-gray-300 dark:border-gray-700 rounded"},dh={key:1,id:"youtube-player",class:"flex-1 !h-full transition-all duration-300 rounded overflow-hidden",style:{"box-shadow":`0px 0px 1px rgba(3, 7, 18, 0.02),
                        0px 1px 4px rgba(3, 7, 18, 0.03),
                        0px 2px 9px rgba(3, 7, 18, 0.05),
                        0px 4px 15px rgba(3, 7, 18, 0.06),
                        0px 6px 24px rgba(3, 7, 18, 0.08)`}},gh={class:"bottom pane"},mh={class:"flex flex-col mt-4 gap-3"},bh={key:0,class:"mt-2 text-red-500 text-sm"},_h={key:1,class:"mt-4"},yh={class:"text-sm text-gray-600 dark:text-gray-400"},xh={class:"font-semibold"},vh={__name:"VideoSync",props:{roomId:{type:String,required:!0}},setup(t){const e=t,n=_e(""),r=_e(""),s=_e(""),i=_e(""),o=_e(!1),a=_e(null),c=_e(!1),u=_e(!1),l=_e(0),f=_e(0),p=_e(null);rr(()=>{le.on("data",v),le.on("connect",D=>{s.value&&a.value&&c.value&&(console.log("Sending current video info to new peer:",D),le.send({type:"video_info",videoId:s.value,currentTime:a.value.getCurrentTime(),playbackRate:a.value.getPlaybackRate(),paused:a.value.getPlayerState()!==YT.PlayerState.PLAYING}))}),window.onYouTubeIframeAPIReady=()=>{console.log("API Ready"),o.value=!0,s.value&&x(s.value)},d()}),Aa(()=>{a.value&&a.value.destroy(),p.value&&clearInterval(p.value)});function d(){if(!document.getElementById("youtube-iframe-api")){const D=document.createElement("script");D.id="youtube-iframe-api",D.src="https://www.youtube.com/iframe_api";const z=document.getElementsByTagName("script")[0];z.parentNode.insertBefore(D,z)}}function v(D){switch(console.log("Got messsage: ",D.type,D),D.type){case"pause":u.value||(u.value=!0,a.value.pauseVideo(),setTimeout(()=>{u.value=!1},500));break;case"play":u.value||(u.value=!0,a.value.playVideo(),setTimeout(()=>{u.value=!1},500));break;case"seek":if(!u.value){u.value=!0;const z=a.value.getPlayerState()===YT.PlayerState.PAUSED;Math.abs(a.value.getCurrentTime()-D.time)>.5&&a.value.seekTo(D.time,!0),setTimeout(()=>{!z&&a.value.getState()!==YT.PlayerState.PLAYING&&a.value.playVideo()}),l.value=D.time,setTimeout(()=>{u.value=!1},500)}break;case"speedChange":u.value||(u.value=!0,a.value.setPlaybackRate(D.rate),setTimeout(()=>{u.value=!1},500));break;case"video_info":console.log("Received video info:",D.videoId),K(D.videoId),o.value&&setTimeout(()=>{a.value&&c.value&&(le.send({type:"speedChange",rate:D.playbackRate}),le.send({type:"seek",time:D.currentTime}),D.paused?le.send({type:"pause"}):le.send({type:"play"}))},1e3);break;case"request_video_info":s.value&&a.value&&c.value&&(console.log("Sending requested video info to peers"),le.send({type:"video_info",videoId:s.value,currentTime:a.value.getCurrentTime(),playbackRate:a.value.getPlaybackRate(),paused:a.value.getPlayerState()!==YT.PlayerState.PLAYING}));break}}function x(D){a.value&&a.value.destroy(),a.value=new YT.Player("youtube-player",{videoId:D,playerVars:{origin:window.location.origin,playsinline:1,modestbranding:1,rel:0},events:{onReady:U,onStateChange:V,onPlaybackRateChange:A,onError:Y}})}function U(){c.value=!0,a.value&&a.value.getVideoData&&(i.value=a.value.getVideoData().title),e.roomId!==le.getId()&&G(),j()}function j(){p.value&&clearInterval(p.value),p.value=setInterval(()=>{if(!a.value||!c.value||u.value)return;const D=a.value.getCurrentTime();Math.abs(D-f.value)>1.5&&pe(),f.value=D},1e3)}function G(){le.send({type:"request_video_info"})}function V(D){u.value||(D.data===YT.PlayerState.PLAYING?(le.send({type:"play"}),pe(),l.value=Date.now(),f.value=a.value.getCurrentTime()):D.data===YT.PlayerState.PAUSED?(le.send({type:"pause"}),pe()):(D.data,YT.PlayerState.BUFFERING))}function A(D){u.value||!a.value||!c.value||le.send({type:"speedChange",rate:a.value.getPlaybackRate()})}function Y(){r.value="Error loading video. Please try another URL.",s.value=""}function pe(){u.value||!a.value||!c.value||le.send({type:"seek",time:a.value.getCurrentTime()})}function fe(){const D=Se(n.value);if(!D){r.value="Invalid YouTube video ID or URL.";return}r.value="",K(D),setTimeout(()=>{console.log("Broadcasting video info to all peers"),le.send({type:"video_info",videoId:D,currentTime:0,playbackRate:1,paused:!0})},1e3),n.value=""}function K(D){s.value=D,console.log("Loading video: ",D),o.value&&(console.log("Creating player"),setTimeout(()=>x(D),10))}function Se(D){const z=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,ge=D.match(z);return ge?ge[1]:null}return(D,z)=>(de(),Ce("div",fh,[W("div",hh,[s.value?(de(),Ce("div",dh)):(de(),Ce("div",ph,z[3]||(z[3]=[W("div",{class:"text-center p-4"},[W("div",{class:"mb-2 text-2xl"},"📺"),W("p",null,"Paste a YouTube URL to start watching together")],-1)])))]),W("div",gh,[W("div",mh,[ws(W("input",{"onUpdate:modelValue":z[0]||(z[0]=ge=>n.value=ge),onInput:z[1]||(z[1]=(...ge)=>D.handleInput&&D.handleInput(...ge)),onPaste:z[2]||(z[2]=(...ge)=>D.handlePaste&&D.handlePaste(...ge)),onKeyup:rc(fe,["enter"]),placeholder:"Enter YouTube video ID or URL",class:"w-full p-2 border border-gray-300 dark:border-gray-700 rounded transition-all duration-300 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 hover:shadow-md dark:bg-gray-800 dark:text-white"},null,544),[[Bs,n.value]]),W("button",{onClick:fe,class:"w-full px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded cursor-pointer focus:outline-none transition-all duration-300 dark:bg-teal-600 dark:hover:bg-teal-700"}," Watch ")]),r.value?(de(),Ce("p",bh,Jt(r.value),1)):Zt("",!0),s.value?(de(),Ce("div",_h,[W("div",yh,[z[4]||(z[4]=bi(" Now playing: ")),W("span",xh,Jt(i.value||"YouTube Video"),1)])])):Zt("",!0)])]))}};function Ci(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let sn=Ci();function Wc(t){sn=t}const Un={exec:()=>null};function Z(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Fe.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}const Fe={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},kh=/^(?:[ \t]*(?:\n|$))+/,Ch=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Sh=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ir=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Th=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Si=/(?:[*+-]|\d{1,9}[.)])/,Vc=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Gc=Z(Vc).replace(/bull/g,Si).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Rh=Z(Vc).replace(/bull/g,Si).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ti=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Eh=/^[^\n]+/,Ri=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ph=Z(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ri).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ah=Z(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Si).getRegex(),Zr="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ei=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ih=Z("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ei).replace("tag",Zr).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Yc=Z(Ti).replace("hr",ir).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zr).getRegex(),wh=Z(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Yc).getRegex(),Pi={blockquote:wh,code:Ch,def:Ph,fences:Sh,heading:Th,hr:ir,html:Ih,lheading:Gc,list:Ah,newline:kh,paragraph:Yc,table:Un,text:Eh},Do=Z("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ir).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zr).getRegex(),Mh={...Pi,lheading:Rh,table:Do,paragraph:Z(Ti).replace("hr",ir).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Do).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zr).getRegex()},Dh={...Pi,html:Z(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ei).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Un,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Z(Ti).replace("hr",ir).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Gc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Oh=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Lh=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Kc=/^( {2,}|\\)\n(?!\s*$)/,$h=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Qr=/[\p{P}\p{S}]/u,Ai=/[\s\p{P}\p{S}]/u,qc=/[^\s\p{P}\p{S}]/u,Nh=Z(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ai).getRegex(),Jc=/(?!~)[\p{P}\p{S}]/u,zh=/(?!~)[\s\p{P}\p{S}]/u,Bh=/(?:[^\s\p{P}\p{S}]|~)/u,Fh=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Xc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,jh=Z(Xc,"u").replace(/punct/g,Qr).getRegex(),Uh=Z(Xc,"u").replace(/punct/g,Jc).getRegex(),Zc="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Hh=Z(Zc,"gu").replace(/notPunctSpace/g,qc).replace(/punctSpace/g,Ai).replace(/punct/g,Qr).getRegex(),Wh=Z(Zc,"gu").replace(/notPunctSpace/g,Bh).replace(/punctSpace/g,zh).replace(/punct/g,Jc).getRegex(),Vh=Z("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,qc).replace(/punctSpace/g,Ai).replace(/punct/g,Qr).getRegex(),Gh=Z(/\\(punct)/,"gu").replace(/punct/g,Qr).getRegex(),Yh=Z(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Kh=Z(Ei).replace("(?:-->|$)","-->").getRegex(),qh=Z("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Kh).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),zr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Jh=Z(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",zr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Qc=Z(/^!?\[(label)\]\[(ref)\]/).replace("label",zr).replace("ref",Ri).getRegex(),el=Z(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ri).getRegex(),Xh=Z("reflink|nolink(?!\\()","g").replace("reflink",Qc).replace("nolink",el).getRegex(),Ii={_backpedal:Un,anyPunctuation:Gh,autolink:Yh,blockSkip:Fh,br:Kc,code:Lh,del:Un,emStrongLDelim:jh,emStrongRDelimAst:Hh,emStrongRDelimUnd:Vh,escape:Oh,link:Jh,nolink:el,punctuation:Nh,reflink:Qc,reflinkSearch:Xh,tag:qh,text:$h,url:Un},Zh={...Ii,link:Z(/^!?\[(label)\]\((.*?)\)/).replace("label",zr).getRegex(),reflink:Z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",zr).getRegex()},Ys={...Ii,emStrongRDelimAst:Wh,emStrongLDelim:Uh,url:Z(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qh={...Ys,br:Z(Kc).replace("{2,}","*").getRegex(),text:Z(Ys.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},dr={normal:Pi,gfm:Mh,pedantic:Dh},An={normal:Ii,gfm:Ys,breaks:Qh,pedantic:Zh},ep={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Oo=t=>ep[t];function gt(t,e){if(e){if(Fe.escapeTest.test(t))return t.replace(Fe.escapeReplace,Oo)}else if(Fe.escapeTestNoEncode.test(t))return t.replace(Fe.escapeReplaceNoEncode,Oo);return t}function Lo(t){try{t=encodeURI(t).replace(Fe.percentDecode,"%")}catch{return null}return t}function $o(t,e){var i;const n=t.replace(Fe.findPipe,(o,a,c)=>{let u=!1,l=a;for(;--l>=0&&c[l]==="\\";)u=!u;return u?"|":" |"}),r=n.split(Fe.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Fe.slashPipe,"|");return r}function In(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function tp(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function No(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const c={type:"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,c}return{type:"image",raw:n,href:i,title:o,text:a}}function np(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}class Br{constructor(e){ne(this,"options");ne(this,"rules");ne(this,"lexer");this.options=e||sn}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:In(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],s=np(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const s=In(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:In(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=In(n[0],`
`).split(`
`),s="",i="";const o=[];for(;r.length>0;){let a=!1;const c=[];let u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))c.push(r[u]),a=!0;else if(!a)c.push(r[u]);else break;r=r.slice(u);const l=c.join(`
`),f=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${l}`:l,i=i?`${i}
${f}`:f;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,o,!0),this.lexer.state.top=p,r.length===0)break;const d=o.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const v=d,x=v.raw+`
`+r.join(`
`),U=this.blockquote(x);o[o.length-1]=U,s=s.substring(0,s.length-v.raw.length)+U.raw,i=i.substring(0,i.length-v.text.length)+U.text;break}else if((d==null?void 0:d.type)==="list"){const v=d,x=v.raw+`
`+r.join(`
`),U=this.list(x);o[o.length-1]=U,s=s.substring(0,s.length-d.raw.length)+U.raw,i=i.substring(0,i.length-v.raw.length)+U.raw,r=x.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const s=r.length>1,i={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");const o=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let u=!1,l="",f="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;l=n[0],e=e.substring(l.length);let p=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,G=>" ".repeat(3*G.length)),d=e.split(`
`,1)[0],v=!p.trim(),x=0;if(this.options.pedantic?(x=2,f=p.trimStart()):v?x=n[1].length+1:(x=n[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,f=p.slice(x),x+=n[1].length),v&&this.rules.other.blankLine.test(d)&&(l+=d+`
`,e=e.substring(d.length+1),u=!0),!u){const G=this.rules.other.nextBulletRegex(x),V=this.rules.other.hrRegex(x),A=this.rules.other.fencesBeginRegex(x),Y=this.rules.other.headingBeginRegex(x),pe=this.rules.other.htmlBeginRegex(x);for(;e;){const fe=e.split(`
`,1)[0];let K;if(d=fe,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),K=d):K=d.replace(this.rules.other.tabCharGlobal,"    "),A.test(d)||Y.test(d)||pe.test(d)||G.test(d)||V.test(d))break;if(K.search(this.rules.other.nonSpaceChar)>=x||!d.trim())f+=`
`+K.slice(x);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(p)||Y.test(p)||V.test(p))break;f+=`
`+d}!v&&!d.trim()&&(v=!0),l+=fe+`
`,e=e.substring(fe.length+1),p=K.slice(x)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(a=!0));let U=null,j;this.options.gfm&&(U=this.rules.other.listIsTask.exec(f),U&&(j=U[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:l,task:!!U,checked:j,loose:!1,text:f,tokens:[]}),i.raw+=l}const c=i.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const l=i.items[u].tokens.filter(p=>p.type==="space"),f=l.length>0&&l.some(p=>this.rules.other.anyLine.test(p.raw));i.loose=f}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:i}}}table(e){var a;const n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=$o(n[1]),s=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(const c of s)this.rules.other.tableAlignRight.test(c)?o.align.push("right"):this.rules.other.tableAlignCenter.test(c)?o.align.push("center"):this.rules.other.tableAlignLeft.test(c)?o.align.push("left"):o.align.push(null);for(let c=0;c<r.length;c++)o.header.push({text:r[c],tokens:this.lexer.inline(r[c]),header:!0,align:o.align[c]});for(const c of i)o.rows.push($o(c,o.header.length).map((u,l)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:o.align[l]})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const o=In(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=tp(n[2],"()");if(o>-1){const c=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let s=n[2],i="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(s);o&&(s=o[1],i=o[3])}else i=n[3]?n[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),No(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=n[s.toLowerCase()];if(!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return No(r,i,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...s[0]].length-1;let a,c,u=o,l=0;const f=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*e.length+o);(s=f.exec(n))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(c=[...a].length,s[3]||s[4]){u+=c;continue}else if((s[5]||s[6])&&o%3&&!((o+c)%3)){l+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+l);const p=[...s[0]][0].length,d=e.slice(0,o+s.index+p+c);if(Math.min(o,c)%2){const x=d.slice(1,-1);return{type:"em",raw:d,text:x,tokens:this.lexer.inlineTokens(x)}}const v=d.slice(2,-2);return{type:"strong",raw:d,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(r),i=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&i&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,s;return n[2]==="@"?(r=n[1],s="mailto:"+r):(r=n[1],s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let s,i;if(n[2]==="@")s=n[0],i="mailto:"+s;else{let o;do o=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(o!==n[0]);s=n[0],n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class rt{constructor(e){ne(this,"tokens");ne(this,"options");ne(this,"state");ne(this,"tokenizer");ne(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||sn,this.options.tokenizer=this.options.tokenizer||new Br,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Fe,block:dr.normal,inline:An.normal};this.options.pedantic?(n.block=dr.pedantic,n.inline=An.pedantic):this.options.gfm&&(n.block=dr.gfm,this.options.breaks?n.inline=An.breaks:n.inline=An.gfm),this.tokenizer.rules=n}static get rules(){return{block:dr,inline:An}}static lex(e,n){return new rt(n).lex(e)}static lexInline(e,n){return new rt(n).inlineTokens(e)}lex(e){e=e.replace(Fe.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Fe.tabCharGlobal,"    ").replace(Fe.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(u=>(a=u.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=n.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let c=e;if((o=this.options.extensions)!=null&&o.startBlock){let u=1/0;const l=e.slice(1);let f;this.options.extensions.startBlock.forEach(p=>{f=p.call({lexer:this},l),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){const u=n.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a),r=c.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,c,u;let r=e,s=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let l;if((c=(a=this.options.extensions)==null?void 0:a.inline)!=null&&c.some(p=>(l=p.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const p=n.at(-1);l.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=l.raw,p.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,o)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let f=e;if((u=this.options.extensions)!=null&&u.startInline){let p=1/0;const d=e.slice(1);let v;this.options.extensions.startInline.forEach(x=>{v=x.call({lexer:this},d),typeof v=="number"&&v>=0&&(p=Math.min(p,v))}),p<1/0&&p>=0&&(f=e.substring(0,p+1))}if(l=this.tokenizer.inlineText(f)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),i=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=l.raw,p.text+=l.text):n.push(l);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}}class Fr{constructor(e){ne(this,"options");ne(this,"parser");this.options=e||sn}space(e){return""}code({text:e,lang:n,escaped:r}){var o;const s=(o=(n||"").match(Fe.notSpaceStart))==null?void 0:o[0],i=e.replace(Fe.endingNewline,"")+`
`;return s?'<pre><code class="language-'+gt(s)+'">'+(r?i:gt(i,!0))+`</code></pre>
`:"<pre><code>"+(r?i:gt(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let s="";for(let a=0;a<e.items.length;a++){const c=e.items[a];s+=this.listitem(c)}const i=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+s+"</"+i+`>
`}listitem(e){var r;let n="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+gt(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):n+=s+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);n+=this.tablerow({text:r});let s="";for(let i=0;i<e.rows.length;i++){const o=e.rows[i];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${gt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const s=this.parser.parseInline(r),i=Lo(e);if(i===null)return s;e=i;let o='<a href="'+e+'"';return n&&(o+=' title="'+gt(n)+'"'),o+=">"+s+"</a>",o}image({href:e,title:n,text:r}){const s=Lo(e);if(s===null)return gt(r);e=s;let i=`<img src="${e}" alt="${r}"`;return n&&(i+=` title="${gt(n)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:gt(e.text)}}class wi{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class st{constructor(e){ne(this,"options");ne(this,"renderer");ne(this,"textRenderer");this.options=e||sn,this.options.renderer=this.options.renderer||new Fr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new wi}static parse(e,n){return new st(n).parse(e)}static parseInline(e,n){return new st(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=a,l=this.options.extensions.renderers[u.type].call({parser:this},u);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=l||"";continue}}const c=a;switch(c.type){case"space":{r+=this.renderer.space(c);continue}case"hr":{r+=this.renderer.hr(c);continue}case"heading":{r+=this.renderer.heading(c);continue}case"code":{r+=this.renderer.code(c);continue}case"table":{r+=this.renderer.table(c);continue}case"blockquote":{r+=this.renderer.blockquote(c);continue}case"list":{r+=this.renderer.list(c);continue}case"html":{r+=this.renderer.html(c);continue}case"paragraph":{r+=this.renderer.paragraph(c);continue}case"text":{let u=c,l=this.renderer.text(u);for(;o+1<e.length&&e[o+1].type==="text";)u=e[++o],l+=`
`+this.renderer.text(u);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{const u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const c=a;switch(c.type){case"escape":{r+=n.text(c);break}case"html":{r+=n.html(c);break}case"link":{r+=n.link(c);break}case"image":{r+=n.image(c);break}case"strong":{r+=n.strong(c);break}case"em":{r+=n.em(c);break}case"codespan":{r+=n.codespan(c);break}case"br":{r+=n.br(c);break}case"del":{r+=n.del(c);break}case"text":{r+=n.text(c);break}default:{const u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}}class Hn{constructor(e){ne(this,"options");ne(this,"block");this.options=e||sn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?rt.lex:rt.lexInline}provideParser(){return this.block?st.parse:st.parseInline}}ne(Hn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class rp{constructor(...e){ne(this,"defaults",Ci());ne(this,"options",this.setOptions);ne(this,"parse",this.parseMarkdown(!0));ne(this,"parseInline",this.parseMarkdown(!1));ne(this,"Parser",st);ne(this,"Renderer",Fr);ne(this,"TextRenderer",wi);ne(this,"Lexer",rt);ne(this,"Tokenizer",Br);ne(this,"Hooks",Hn);this.use(...e)}walkTokens(e,n){var s,i;let r=[];for(const o of e)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const a=o;for(const c of a.header)r=r.concat(this.walkTokens(c.tokens,n));for(const c of a.rows)for(const u of c)r=r.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=o;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(c=>{const u=a[c].flat(1/0);r=r.concat(this.walkTokens(u,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=n.renderers[i.name];o?n.renderers[i.name]=function(...a){let c=i.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[i.level];o?o.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),s.extensions=n),r.renderer){const i=this.defaults.renderer||new Fr(this.defaults);for(const o in r.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,c=r.renderer[a],u=i[a];i[a]=(...l)=>{let f=c.apply(i,l);return f===!1&&(f=u.apply(i,l)),f||""}}s.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new Br(this.defaults);for(const o in r.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,c=r.tokenizer[a],u=i[a];i[a]=(...l)=>{let f=c.apply(i,l);return f===!1&&(f=u.apply(i,l)),f}}s.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new Hn;for(const o in r.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,c=r.hooks[a],u=i[a];Hn.passThroughHooks.has(o)?i[a]=l=>{if(this.defaults.async)return Promise.resolve(c.call(i,l)).then(p=>u.call(i,p));const f=c.call(i,l);return u.call(i,f)}:i[a]=(...l)=>{let f=c.apply(i,l);return f===!1&&(f=u.apply(i,l)),f}}s.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,o=r.walkTokens;s.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return rt.lex(e,n??this.defaults)}parser(e,n){return st.parse(e,n??this.defaults)}parseMarkdown(e){return(r,s)=>{const i={...s},o={...this.defaults,...i},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const c=o.hooks?o.hooks.provideLexer():e?rt.lex:rt.lexInline,u=o.hooks?o.hooks.provideParser():e?st.parse:st.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>c(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>u(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let l=c(r,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let f=u(l,o);return o.hooks&&(f=o.hooks.postprocess(f)),f}catch(l){return a(l)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+gt(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}}const en=new rp;function te(t,e){return en.parse(t,e)}te.options=te.setOptions=function(t){return en.setOptions(t),te.defaults=en.defaults,Wc(te.defaults),te};te.getDefaults=Ci;te.defaults=sn;te.use=function(...t){return en.use(...t),te.defaults=en.defaults,Wc(te.defaults),te};te.walkTokens=function(t,e){return en.walkTokens(t,e)};te.parseInline=en.parseInline;te.Parser=st;te.parser=st.parse;te.Renderer=Fr;te.TextRenderer=wi;te.Lexer=rt;te.lexer=rt.lex;te.Tokenizer=Br;te.Hooks=Hn;te.parse=te;te.options;te.setOptions;te.use;te.walkTokens;te.parseInline;st.parse;rt.lex;/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:tl,setPrototypeOf:zo,isFrozen:sp,getPrototypeOf:ip,getOwnPropertyDescriptor:op}=Object;let{freeze:He,seal:ot,create:nl}=Object,{apply:Ks,construct:qs}=typeof Reflect<"u"&&Reflect;He||(He=function(e){return e});ot||(ot=function(e){return e});Ks||(Ks=function(e,n,r){return e.apply(n,r)});qs||(qs=function(e,n){return new e(...n)});const gr=We(Array.prototype.forEach),ap=We(Array.prototype.lastIndexOf),Bo=We(Array.prototype.pop),wn=We(Array.prototype.push),cp=We(Array.prototype.splice),Pr=We(String.prototype.toLowerCase),_s=We(String.prototype.toString),Fo=We(String.prototype.match),Mn=We(String.prototype.replace),lp=We(String.prototype.indexOf),up=We(String.prototype.trim),ct=We(Object.prototype.hasOwnProperty),$e=We(RegExp.prototype.test),Dn=fp(TypeError);function We(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Ks(t,e,r)}}function fp(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return qs(t,n)}}function H(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pr;zo&&zo(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(sp(e)||(e[r]=i),s=i)}t[s]=!0}return t}function hp(t){for(let e=0;e<t.length;e++)ct(t,e)||(t[e]=null);return t}function Kt(t){const e=nl(null);for(const[n,r]of tl(t))ct(t,n)&&(Array.isArray(r)?e[n]=hp(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Kt(r):e[n]=r);return e}function On(t,e){for(;t!==null;){const r=op(t,e);if(r){if(r.get)return We(r.get);if(typeof r.value=="function")return We(r.value)}t=ip(t)}function n(){return null}return n}const jo=He(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ys=He(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xs=He(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pp=He(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vs=He(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dp=He(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Uo=He(["#text"]),Ho=He(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ks=He(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wo=He(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mr=He(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gp=ot(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mp=ot(/<%[\w\W]*|[\w\W]*%>/gm),bp=ot(/\$\{[\w\W]*/gm),_p=ot(/^data-[\-\w.\u00B7-\uFFFF]+$/),yp=ot(/^aria-[\-\w]+$/),rl=ot(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xp=ot(/^(?:\w+script|data):/i),vp=ot(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sl=ot(/^html$/i),kp=ot(/^[a-z][.\w]*(-[.\w]+)+$/i);var Vo=Object.freeze({__proto__:null,ARIA_ATTR:yp,ATTR_WHITESPACE:vp,CUSTOM_ELEMENT:kp,DATA_ATTR:_p,DOCTYPE_NAME:sl,ERB_EXPR:mp,IS_ALLOWED_URI:rl,IS_SCRIPT_OR_DATA:xp,MUSTACHE_EXPR:gp,TMPLIT_EXPR:bp});const Ln={element:1,text:3,progressingInstruction:7,comment:8,document:9},Cp=function(){return typeof window>"u"?null:window},Sp=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Go=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function il(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cp();const e=O=>il(O);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Ln.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:c,NodeFilter:u,NamedNodeMap:l=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:d}=t,v=c.prototype,x=On(v,"cloneNode"),U=On(v,"remove"),j=On(v,"nextSibling"),G=On(v,"childNodes"),V=On(v,"parentNode");if(typeof o=="function"){const O=n.createElement("template");O.content&&O.content.ownerDocument&&(n=O.content.ownerDocument)}let A,Y="";const{implementation:pe,createNodeIterator:fe,createDocumentFragment:K,getElementsByTagName:Se}=n,{importNode:D}=r;let z=Go();e.isSupported=typeof tl=="function"&&typeof V=="function"&&pe&&pe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ge,ERB_EXPR:ut,TMPLIT_EXPR:Ut,DATA_ATTR:or,ARIA_ATTR:Te,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:kt}=Vo;let{IS_ALLOWED_URI:Ht}=Vo,se=null;const qe=H({},[...jo,...ys,...xs,...vs,...Uo]);let me=null;const ar=H({},[...Ho,...ks,...Wo,...mr]);let ce=Object.seal(nl(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),at=null,Mt=null,on=!0,an=!0,Dt=!1,es=!0,h=!1,g=!0,b=!1,k=!1,_=!1,y=!1,E=!1,T=!1,R=!0,C=!1;const $="user-content-";let P=!0,M=!1,L={},B=null;const ee=H({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let q=null;const Ee=H({},["audio","video","img","source","image","track"]);let xe=null;const Je=H({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Oe="http://www.w3.org/1998/Math/MathML",ft="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml";let be=tt,Ve=!1,cn=null;const al=H({},[Oe,ft,tt],_s);let cr=H({},["mi","mo","mn","ms","mtext"]),lr=H({},["annotation-xml"]);const cl=H({},["title","style","font","a","script"]);let Cn=null;const ll=["application/xhtml+xml","text/html"],ul="text/html";let ve=null,ln=null;const fl=n.createElement("form"),Mi=function(m){return m instanceof RegExp||m instanceof Function},ts=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ln&&ln===m)){if((!m||typeof m!="object")&&(m={}),m=Kt(m),Cn=ll.indexOf(m.PARSER_MEDIA_TYPE)===-1?ul:m.PARSER_MEDIA_TYPE,ve=Cn==="application/xhtml+xml"?_s:Pr,se=ct(m,"ALLOWED_TAGS")?H({},m.ALLOWED_TAGS,ve):qe,me=ct(m,"ALLOWED_ATTR")?H({},m.ALLOWED_ATTR,ve):ar,cn=ct(m,"ALLOWED_NAMESPACES")?H({},m.ALLOWED_NAMESPACES,_s):al,xe=ct(m,"ADD_URI_SAFE_ATTR")?H(Kt(Je),m.ADD_URI_SAFE_ATTR,ve):Je,q=ct(m,"ADD_DATA_URI_TAGS")?H(Kt(Ee),m.ADD_DATA_URI_TAGS,ve):Ee,B=ct(m,"FORBID_CONTENTS")?H({},m.FORBID_CONTENTS,ve):ee,at=ct(m,"FORBID_TAGS")?H({},m.FORBID_TAGS,ve):{},Mt=ct(m,"FORBID_ATTR")?H({},m.FORBID_ATTR,ve):{},L=ct(m,"USE_PROFILES")?m.USE_PROFILES:!1,on=m.ALLOW_ARIA_ATTR!==!1,an=m.ALLOW_DATA_ATTR!==!1,Dt=m.ALLOW_UNKNOWN_PROTOCOLS||!1,es=m.ALLOW_SELF_CLOSE_IN_ATTR!==!1,h=m.SAFE_FOR_TEMPLATES||!1,g=m.SAFE_FOR_XML!==!1,b=m.WHOLE_DOCUMENT||!1,y=m.RETURN_DOM||!1,E=m.RETURN_DOM_FRAGMENT||!1,T=m.RETURN_TRUSTED_TYPE||!1,_=m.FORCE_BODY||!1,R=m.SANITIZE_DOM!==!1,C=m.SANITIZE_NAMED_PROPS||!1,P=m.KEEP_CONTENT!==!1,M=m.IN_PLACE||!1,Ht=m.ALLOWED_URI_REGEXP||rl,be=m.NAMESPACE||tt,cr=m.MATHML_TEXT_INTEGRATION_POINTS||cr,lr=m.HTML_INTEGRATION_POINTS||lr,ce=m.CUSTOM_ELEMENT_HANDLING||{},m.CUSTOM_ELEMENT_HANDLING&&Mi(m.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=m.CUSTOM_ELEMENT_HANDLING.tagNameCheck),m.CUSTOM_ELEMENT_HANDLING&&Mi(m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),m.CUSTOM_ELEMENT_HANDLING&&typeof m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),h&&(an=!1),E&&(y=!0),L&&(se=H({},Uo),me=[],L.html===!0&&(H(se,jo),H(me,Ho)),L.svg===!0&&(H(se,ys),H(me,ks),H(me,mr)),L.svgFilters===!0&&(H(se,xs),H(me,ks),H(me,mr)),L.mathMl===!0&&(H(se,vs),H(me,Wo),H(me,mr))),m.ADD_TAGS&&(se===qe&&(se=Kt(se)),H(se,m.ADD_TAGS,ve)),m.ADD_ATTR&&(me===ar&&(me=Kt(me)),H(me,m.ADD_ATTR,ve)),m.ADD_URI_SAFE_ATTR&&H(xe,m.ADD_URI_SAFE_ATTR,ve),m.FORBID_CONTENTS&&(B===ee&&(B=Kt(B)),H(B,m.FORBID_CONTENTS,ve)),P&&(se["#text"]=!0),b&&H(se,["html","head","body"]),se.table&&(H(se,["tbody"]),delete at.tbody),m.TRUSTED_TYPES_POLICY){if(typeof m.TRUSTED_TYPES_POLICY.createHTML!="function")throw Dn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof m.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Dn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=m.TRUSTED_TYPES_POLICY,Y=A.createHTML("")}else A===void 0&&(A=Sp(d,s)),A!==null&&typeof Y=="string"&&(Y=A.createHTML(""));He&&He(m),ln=m}},Di=H({},[...ys,...xs,...pp]),Oi=H({},[...vs,...dp]),hl=function(m){let S=V(m);(!S||!S.tagName)&&(S={namespaceURI:be,tagName:"template"});const w=Pr(m.tagName),ae=Pr(S.tagName);return cn[m.namespaceURI]?m.namespaceURI===ft?S.namespaceURI===tt?w==="svg":S.namespaceURI===Oe?w==="svg"&&(ae==="annotation-xml"||cr[ae]):!!Di[w]:m.namespaceURI===Oe?S.namespaceURI===tt?w==="math":S.namespaceURI===ft?w==="math"&&lr[ae]:!!Oi[w]:m.namespaceURI===tt?S.namespaceURI===ft&&!lr[ae]||S.namespaceURI===Oe&&!cr[ae]?!1:!Oi[w]&&(cl[w]||!Di[w]):!!(Cn==="application/xhtml+xml"&&cn[m.namespaceURI]):!1},ht=function(m){wn(e.removed,{element:m});try{V(m).removeChild(m)}catch{U(m)}},ur=function(m,S){try{wn(e.removed,{attribute:S.getAttributeNode(m),from:S})}catch{wn(e.removed,{attribute:null,from:S})}if(S.removeAttribute(m),m==="is")if(y||E)try{ht(S)}catch{}else try{S.setAttribute(m,"")}catch{}},Li=function(m){let S=null,w=null;if(_)m="<remove></remove>"+m;else{const Re=Fo(m,/^[\r\n\t ]+/);w=Re&&Re[0]}Cn==="application/xhtml+xml"&&be===tt&&(m='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+m+"</body></html>");const ae=A?A.createHTML(m):m;if(be===tt)try{S=new p().parseFromString(ae,Cn)}catch{}if(!S||!S.documentElement){S=pe.createDocument(be,"template",null);try{S.documentElement.innerHTML=Ve?Y:ae}catch{}}const Pe=S.body||S.documentElement;return m&&w&&Pe.insertBefore(n.createTextNode(w),Pe.childNodes[0]||null),be===tt?Se.call(S,b?"html":"body")[0]:b?S.documentElement:Pe},$i=function(m){return fe.call(m.ownerDocument||m,m,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ns=function(m){return m instanceof f&&(typeof m.nodeName!="string"||typeof m.textContent!="string"||typeof m.removeChild!="function"||!(m.attributes instanceof l)||typeof m.removeAttribute!="function"||typeof m.setAttribute!="function"||typeof m.namespaceURI!="string"||typeof m.insertBefore!="function"||typeof m.hasChildNodes!="function")},Ni=function(m){return typeof a=="function"&&m instanceof a};function Ct(O,m,S){gr(O,w=>{w.call(e,m,S,ln)})}const zi=function(m){let S=null;if(Ct(z.beforeSanitizeElements,m,null),ns(m))return ht(m),!0;const w=ve(m.nodeName);if(Ct(z.uponSanitizeElement,m,{tagName:w,allowedTags:se}),m.hasChildNodes()&&!Ni(m.firstElementChild)&&$e(/<[/\w]/g,m.innerHTML)&&$e(/<[/\w]/g,m.textContent)||m.nodeType===Ln.progressingInstruction||g&&m.nodeType===Ln.comment&&$e(/<[/\w]/g,m.data))return ht(m),!0;if(!se[w]||at[w]){if(!at[w]&&Fi(w)&&(ce.tagNameCheck instanceof RegExp&&$e(ce.tagNameCheck,w)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(w)))return!1;if(P&&!B[w]){const ae=V(m)||m.parentNode,Pe=G(m)||m.childNodes;if(Pe&&ae){const Re=Pe.length;for(let Ge=Re-1;Ge>=0;--Ge){const pt=x(Pe[Ge],!0);pt.__removalCount=(m.__removalCount||0)+1,ae.insertBefore(pt,j(m))}}}return ht(m),!0}return m instanceof c&&!hl(m)||(w==="noscript"||w==="noembed"||w==="noframes")&&$e(/<\/no(script|embed|frames)/i,m.innerHTML)?(ht(m),!0):(h&&m.nodeType===Ln.text&&(S=m.textContent,gr([ge,ut,Ut],ae=>{S=Mn(S,ae," ")}),m.textContent!==S&&(wn(e.removed,{element:m.cloneNode()}),m.textContent=S)),Ct(z.afterSanitizeElements,m,null),!1)},Bi=function(m,S,w){if(R&&(S==="id"||S==="name")&&(w in n||w in fl))return!1;if(!(an&&!Mt[S]&&$e(or,S))){if(!(on&&$e(Te,S))){if(!me[S]||Mt[S]){if(!(Fi(m)&&(ce.tagNameCheck instanceof RegExp&&$e(ce.tagNameCheck,m)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(m))&&(ce.attributeNameCheck instanceof RegExp&&$e(ce.attributeNameCheck,S)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(S))||S==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&$e(ce.tagNameCheck,w)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(w))))return!1}else if(!xe[S]){if(!$e(Ht,Mn(w,Q,""))){if(!((S==="src"||S==="xlink:href"||S==="href")&&m!=="script"&&lp(w,"data:")===0&&q[m])){if(!(Dt&&!$e(oe,Mn(w,Q,"")))){if(w)return!1}}}}}}return!0},Fi=function(m){return m!=="annotation-xml"&&Fo(m,kt)},ji=function(m){Ct(z.beforeSanitizeAttributes,m,null);const{attributes:S}=m;if(!S||ns(m))return;const w={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:me,forceKeepAttr:void 0};let ae=S.length;for(;ae--;){const Pe=S[ae],{name:Re,namespaceURI:Ge,value:pt}=Pe,Sn=ve(Re);let Le=Re==="value"?pt:up(pt);if(w.attrName=Sn,w.attrValue=Le,w.keepAttr=!0,w.forceKeepAttr=void 0,Ct(z.uponSanitizeAttribute,m,w),Le=w.attrValue,C&&(Sn==="id"||Sn==="name")&&(ur(Re,m),Le=$+Le),g&&$e(/((--!?|])>)|<\/(style|title)/i,Le)){ur(Re,m);continue}if(w.forceKeepAttr||(ur(Re,m),!w.keepAttr))continue;if(!es&&$e(/\/>/i,Le)){ur(Re,m);continue}h&&gr([ge,ut,Ut],Hi=>{Le=Mn(Le,Hi," ")});const Ui=ve(m.nodeName);if(Bi(Ui,Sn,Le)){if(A&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!Ge)switch(d.getAttributeType(Ui,Sn)){case"TrustedHTML":{Le=A.createHTML(Le);break}case"TrustedScriptURL":{Le=A.createScriptURL(Le);break}}try{Ge?m.setAttributeNS(Ge,Re,Le):m.setAttribute(Re,Le),ns(m)?ht(m):Bo(e.removed)}catch{}}}Ct(z.afterSanitizeAttributes,m,null)},pl=function O(m){let S=null;const w=$i(m);for(Ct(z.beforeSanitizeShadowDOM,m,null);S=w.nextNode();)Ct(z.uponSanitizeShadowNode,S,null),zi(S),ji(S),S.content instanceof i&&O(S.content);Ct(z.afterSanitizeShadowDOM,m,null)};return e.sanitize=function(O){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=null,w=null,ae=null,Pe=null;if(Ve=!O,Ve&&(O="<!-->"),typeof O!="string"&&!Ni(O))if(typeof O.toString=="function"){if(O=O.toString(),typeof O!="string")throw Dn("dirty is not a string, aborting")}else throw Dn("toString is not a function");if(!e.isSupported)return O;if(k||ts(m),e.removed=[],typeof O=="string"&&(M=!1),M){if(O.nodeName){const pt=ve(O.nodeName);if(!se[pt]||at[pt])throw Dn("root node is forbidden and cannot be sanitized in-place")}}else if(O instanceof a)S=Li("<!---->"),w=S.ownerDocument.importNode(O,!0),w.nodeType===Ln.element&&w.nodeName==="BODY"||w.nodeName==="HTML"?S=w:S.appendChild(w);else{if(!y&&!h&&!b&&O.indexOf("<")===-1)return A&&T?A.createHTML(O):O;if(S=Li(O),!S)return y?null:T?Y:""}S&&_&&ht(S.firstChild);const Re=$i(M?O:S);for(;ae=Re.nextNode();)zi(ae),ji(ae),ae.content instanceof i&&pl(ae.content);if(M)return O;if(y){if(E)for(Pe=K.call(S.ownerDocument);S.firstChild;)Pe.appendChild(S.firstChild);else Pe=S;return(me.shadowroot||me.shadowrootmode)&&(Pe=D.call(r,Pe,!0)),Pe}let Ge=b?S.outerHTML:S.innerHTML;return b&&se["!doctype"]&&S.ownerDocument&&S.ownerDocument.doctype&&S.ownerDocument.doctype.name&&$e(sl,S.ownerDocument.doctype.name)&&(Ge="<!DOCTYPE "+S.ownerDocument.doctype.name+`>
`+Ge),h&&gr([ge,ut,Ut],pt=>{Ge=Mn(Ge,pt," ")}),A&&T?A.createHTML(Ge):Ge},e.setConfig=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ts(O),k=!0},e.clearConfig=function(){ln=null,k=!1},e.isValidAttribute=function(O,m,S){ln||ts({});const w=ve(O),ae=ve(m);return Bi(w,ae,S)},e.addHook=function(O,m){typeof m=="function"&&wn(z[O],m)},e.removeHook=function(O,m){if(m!==void 0){const S=ap(z[O],m);return S===-1?void 0:cp(z[O],S,1)[0]}return Bo(z[O])},e.removeHooks=function(O){z[O]=[]},e.removeAllHooks=function(){z=Go()},e}var Tp=il();const Rp={class:"flex flex-col flex-1 border border-gray-300 dark:border-gray-700 rounded overflow-auto transition-all duration-300 hover:shadow-md dark:hover:shadow-lg"},Ep={class:"grid grid-cols-2 gap-4 bg-gray-100 dark:bg-gray-800 p-3 border-b border-gray-300 dark:border-gray-700 text-sm"},Pp={class:"flex flex-col"},Ap={class:"text-nowrap overflow-hidden text-ellipsis"},Ip={key:0,class:"flex flex-col"},wp={class:"text-nowrap overflow-hidden text-ellipsis"},Mp={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},Dp=["innerHTML"],Op={key:0,class:"p-3 bg-teal-50 dark:bg-teal-900 border-t border-teal-200 dark:border-teal-700"},Lp={class:"flex flex-wrap"},$p={__name:"Chat",props:{roomId:{type:String,required:!0}},setup(t){const e=t,n=_e(""),r=_e([]),s=_e(null),i=_e(""),o=_e("");rr(()=>{const d=localStorage.getItem("ytogether_username");d&&(i.value=d),le.on("data",c),le.on("connect",()=>{r.value.length>0&&le.send({type:"chat_history",messages:r.value}),console.log("Chat initialized"),le.getId()===e.roomId&&(console.log("You are the host of this room"),l("System","Welcome to your room! Share the URL to invite others."))})});function a(){o.value.trim()&&(i.value=o.value.trim(),localStorage.setItem("ytogether_username",i.value),o.value="")}function c(d){d.type==="chat"?l(d.sender,d.content):d.type==="chat_history"&&r.value.length===0&&d.messages.length>0&&(r.value=d.messages,p())}function u(){if(n.value.trim()&&i.value){const d=n.value;l(i.value,d),le.send({type:"chat",sender:i.value,content:d}),n.value=""}}function l(d,v){const x=d===le.getId()&&i.value?i.value:d;r.value.push({sender:x,content:v,timestamp:new Date}),p()}function f(d){return Tp.sanitize(te.parse(d))}function p(){va(()=>{s.value&&(s.value.scrollTop=s.value.scrollHeight)})}return(d,v)=>(de(),Ce("div",Rp,[W("div",Ep,[W("div",Pp,[v[2]||(v[2]=W("span",{class:"font-semibold"},"Room ID:",-1)),W("span",Ap,Jt(t.roomId),1)]),i.value?(de(),Ce("div",Ip,[v[3]||(v[3]=W("span",{class:"font-semibold"},"Your name:",-1)),W("span",wp,Jt(i.value),1)])):Zt("",!0)]),W("div",{ref_key:"chatContainer",ref:s,class:"flex-1 p-4 overflow-y-auto"},[(de(!0),Ce(Ke,null,wa(r.value,(x,U)=>(de(),Ce("div",{key:U,class:"mb-3"},[W("div",Mp,Jt(x.sender),1),W("div",{class:"bg-gray-50 dark:bg-gray-700 p-2 rounded",innerHTML:f(x.content)},null,8,Dp)]))),128))],512),i.value?Zt("",!0):(de(),Ce("div",Op,[v[4]||(v[4]=W("div",{class:"text-sm mb-2"},"Enter your name to join the chat:",-1)),W("div",Lp,[ws(W("input",{"onUpdate:modelValue":v[0]||(v[0]=x=>o.value=x),placeholder:"Your name",class:"mt-2 flex-1 p-2 border border-gray-300 dark:border-gray-700 rounded-l transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 dark:bg-gray-800 dark:text-white"},null,512),[[Bs,o.value]]),W("button",{onClick:a,class:"mt-2 px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded-r focus:outline-none transition-all duration-300 dark:bg-teal-600 dark:hover:bg-teal-700"}," Join ")])])),i.value?ws((de(),Ce("input",{key:1,"onUpdate:modelValue":v[1]||(v[1]=x=>n.value=x),onKeyup:rc(u,["enter"]),placeholder:"Type a message...",class:"p-2 border-t border-gray-300 dark:border-gray-700 w-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 hover:shadow-inner dark:bg-gray-800 dark:text-white"},null,544)),[[Bs,n.value]]):Zt("",!0)]))}},Np={class:"flex flex-col flex-1"},zp={key:0,class:"mx-10 mt-6 p-3 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-md text-blue-700 dark:text-blue-300 text-sm flex items-center justify-center"},Bp={class:"pane flex flex-col"},Fp={key:0,class:"mb-6 p-3 bg-teal-50 dark:bg-teal-900 border border-teal-200 dark:border-teal-700 rounded-md text-teal-700 dark:text-teal-300 text-sm"},jp={__name:"Room",setup(t){const e=_e(""),n=_e(!1),r=_e("");$a("roomId",e);async function s(){const f=await le.createRoom();return e.value=f,u(f),n.value=!0,l(),console.log("Created new room with ID:",f),f}const i=_e(null),o=(f,p={})=>Object.assign(document.createElement(f),p);let a=!1;const c=(f,p)=>{const d=f.classList.contains("panes-v"),v=f.querySelectorAll(":scope > .pane");let x=f.getAttribute("data-panes")?f.getAttribute("data-panes").split(",").map(Number):[...v].map(()=>1);x=x.map(K=>K/x.reduce((Se,D)=>Se+D,0));let U=null,j=-1,G=0,V=0;const A=()=>{f.style[d?"grid-template-rows":"grid-template-columns"]=x.join("fr ")+"fr"},Y=K=>{a||!K.target.closest(".gutter")||(a=!0,U=K.currentTarget,x=[...v].map(Se=>d?Se.clientHeight/f.clientHeight:Se.clientWidth/f.clientWidth),j=[...v].indexOf(U),G=x[j],V=x[j+1],addEventListener("pointermove",pe),addEventListener("pointerup",fe))},pe=K=>{K.preventDefault();const Se=U.getBoundingClientRect(),D=d?f.clientHeight:f.clientWidth,ge={x:Math.max(0,Math.min(K.clientX-Se.left,f.clientWidth)),y:Math.max(0,Math.min(K.clientY-Se.top,f.clientHeight))}[d?"y":"x"]/D,ut=G-ge;x[j]=Math.max(.05,ge),x[j+1]=Math.max(.05,V+ut),A()},fe=K=>{removeEventListener("pointermove",pe),removeEventListener("pointerup",fe),a=!1};[...v].slice(0,-1).forEach((K,Se)=>{K.append(o("div",{className:"gutter"})),K.addEventListener("pointerdown",Y)}),A()};rr(async()=>{const f=new URLSearchParams(window.location.search).get("roomId");[...document.querySelectorAll(".panes")].forEach(c);try{if(f){r.value="Joining room "+f,e.value=f,console.log("Joining room:",f);try{await le.joinRoom(f),console.log("Joined room:",f)}catch(p){r.value="Failed to join room, creating room",console.error("Failed to join room:",p),console.log("Creating new room instead"),await s()}}else r.value="Creating room",await s()}catch(p){console.error("Failed to initialize room:",p)}r.value=!1});function u(f){const p=`${window.location.pathname}?roomId=${f}`;window.history.pushState({path:p},"",p)}function l(){setTimeout(()=>{try{navigator.clipboard.writeText(window.location.href).then(()=>{console.log("URL copied to clipboard!")})}catch(f){console.error("Failed to copy URL: ",f)}},100)}return(f,p)=>(de(),Ce("div",Np,[r.value?(de(),Ce("div",zp,[p[0]||(p[0]=W("svg",{class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[W("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),W("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),bi(" "+Jt(r.value||"Loading..."),1)])):Zt("",!0),W("div",{class:"grid flex-1 grid-cols-[3fr_2fr] p-4 overflow-auto panes-h panes",ref_key:"dragContainer",ref:i,"data-panes":"2,1"},[et(vh,{roomId:e.value},null,8,["roomId"]),W("div",Bp,[n.value?(de(),Ce("div",Fp,[p[1]||(p[1]=W("p",null," New room created with secure UUID! URL copied to clipboard for sharing. ",-1)),W("button",{onClick:l,class:"mt-1 text-xs px-2 py-1 bg-teal-100 dark:bg-teal-800 hover:bg-teal-200 dark:hover:bg-teal-700 rounded transition-colors"}," Copy URL again ")])):Zt("",!0),et($p,{roomId:e.value},null,8,["roomId"])])],512)]))}},Up={class:"h-screen w-screen bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-mono flex flex-col overflow-auto"},Hp={__name:"App",setup(t){return rr(()=>{document.title="YTogether - Watch YouTube Videos Together"}),(e,n)=>(de(),Ce("div",Up,[n[0]||(n[0]=W("header",{class:"bg-teal-600 dark:bg-teal-800 text-white p-2 shadow-md"},[W("div",{class:"px-4 mx-auto flex items-center justify-between"},[W("h1",{class:"text-lg p-0 font-bold !my-0"},"YTogether"),W("p",{class:"text-xs text-teal-100"},"Watch YouTube videos")])],-1)),et(jp)]))}};function Yo(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function fn(t,e,n,r=1){const[s,i]=typeof r=="number"?[r,r]:r,o=Math.round(e/s/t[0])*t[0],a=Math.round(n/i/t[1])*t[1];return[o,a]}function Cs(t,e,n){return t-e-n}function Ss(t,e,n){return t-e-n}function nt(t,e,n){return e!==null&&t<e?e:n!==null&&n<t?n:t}function Ko(t,e,n){let r=t;const s=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(i=>Yo(r[i]));if(!Yo(r[s]))return!1;do{if(r[s](e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Wp(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function Gt(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function Tt(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}const Vp=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Ar={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},Gp={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},Yp={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let Rt=Ar.mouse;const Kp={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(n=>e.has(n))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[n,r]=Wp(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:n)/(this.h!=="auto"?this.h:r),this.width=this.w!=="auto"?this.w:n,this.height=this.h!=="auto"?this.h:r,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),Gt(document.documentElement,"mousedown",this.deselect),Gt(document.documentElement,"touchend touchcancel",this.deselect),Gt(window,"resize",this.checkParentSize)},beforeUnmount:function(){Tt(document.documentElement,"mousedown",this.deselect),Tt(document.documentElement,"touchstart",this.handleUp),Tt(document.documentElement,"mousemove",this.move),Tt(document.documentElement,"touchmove",this.move),Tt(document.documentElement,"mouseup",this.handleUp),Tt(document.documentElement,"touchend touchcancel",this.deselect),Tt(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){Rt=Ar.touch,this.elementDown(t)},elementMouseDown(t){Rt=Ar.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!Ko(e,this.dragHandle,this.$el)||this.dragCancel&&Ko(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),Gt(document.documentElement,Rt.move,this.move),Gt(document.documentElement,Rt.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,n=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!n.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),Tt(document.documentElement,Rt.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){Rt=Ar.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),Gt(document.documentElement,Rt.move,this.handleResize),Gt(document.documentElement,Rt.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,e=this.minH,n=this.maxW,r=this.maxH;const s=this.aspectFactor,[i,o]=this.grid,a=this.width,c=this.height,u=this.left,l=this.top,f=this.right,p=this.bottom;this.lockAspectRatio&&(t/e>s?e=t/s:t=s*e,n&&r?(n=Math.min(n,s*r),r=Math.min(r,n/s)):n?r=n/s:r&&(n=s*r)),n=n-n%i,r=r-r%o;const d={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(d.minLeft=u%i,d.maxLeft=u+Math.floor((a-t)/i)*i,d.minTop=l%o,d.maxTop=l+Math.floor((c-e)/o)*o,d.minRight=f%i,d.maxRight=f+Math.floor((a-t)/i)*i,d.minBottom=p%o,d.maxBottom=p+Math.floor((c-e)/o)*o,n&&(d.minLeft=Math.max(d.minLeft,this.parentWidth-f-n),d.minRight=Math.max(d.minRight,this.parentWidth-u-n)),r&&(d.minTop=Math.max(d.minTop,this.parentHeight-p-r),d.minBottom=Math.max(d.minBottom,this.parentHeight-l-r)),this.lockAspectRatio&&(d.minLeft=Math.max(d.minLeft,u-l*s),d.minTop=Math.max(d.minTop,l-u/s),d.minRight=Math.max(d.minRight,f-p*s),d.minBottom=Math.max(d.minBottom,p-f/s))):(d.minLeft=null,d.maxLeft=u+Math.floor((a-t)/i)*i,d.minTop=null,d.maxTop=l+Math.floor((c-e)/o)*o,d.minRight=null,d.maxRight=f+Math.floor((a-t)/i)*i,d.minBottom=null,d.maxBottom=p+Math.floor((c-e)/o)*o,n&&(d.minLeft=-(f+n),d.minRight=-(u+n)),r&&(d.minTop=-(p+r),d.minBottom=-(l+r)),this.lockAspectRatio&&n&&r&&(d.minLeft=Math.min(d.minLeft,-(f+n)),d.minTop=Math.min(d.minTop,-(r+p)),d.minRight=Math.min(d.minRight,-u-n),d.minBottom=Math.min(d.minBottom,-l-r))),d},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const e=this.axis,n=this.grid,r=this.bounds,s=this.mouseClickPosition,i=e&&e!=="y"?s.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=e&&e!=="x"?s.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[a,c]=fn(n,i,o,this.scale),u=nt(s.left-a,r.minLeft,r.maxLeft),l=nt(s.top-c,r.minTop,r.maxTop);if(this.onDrag(u,l)===!1)return;const f=nt(s.right+a,r.minRight,r.maxRight),p=nt(s.bottom+c,r.minBottom,r.maxBottom);this.left=u,this.top=l,this.right=f,this.bottom=p,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[e,n]=fn(this.grid,t,this.top,1),r=nt(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=r,this.right=this.parentWidth-this.width-r},moveVertically(t){const[e,n]=fn(this.grid,this.left,t,1),r=nt(n,this.bounds.minTop,this.bounds.maxTop);this.top=r,this.bottom=this.parentHeight-this.height-r},handleResize(t){let e=this.left,n=this.top,r=this.right,s=this.bottom;const i=this.mouseClickPosition,o=this.aspectFactor,a=i.mouseX-(t.touches?t.touches[0].pageX:t.pageX),c=i.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&a&&(this.widthTouched=!0),!this.heightTouched&&c&&(this.heightTouched=!0);const[u,l]=fn(this.grid,a,c,this.scale);this.handle.includes("b")?(s=nt(i.bottom+l,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(r=this.right-(this.bottom-s)*o)):this.handle.includes("t")&&(n=nt(i.top-l,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-n)*o)),this.handle.includes("r")?(r=nt(i.right+u,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(s=this.bottom-(this.right-r)/o)):this.handle.includes("l")&&(e=nt(i.left-u,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(n=this.top-(this.left-e)/o));const f=Cs(this.parentWidth,e,r),p=Ss(this.parentHeight,n,s);this.onResize(this.handle,e,n,f,p)!==!1&&(this.left=e,this.top=n,this.right=r,this.bottom=s,this.width=f,this.height=p,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[e,n]=fn(this.grid,t,0,1),r=nt(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let s=this.bottom;this.lockAspectRatio&&(s=this.bottom-(this.right-r)/this.aspectFactor);const i=Cs(this.parentWidth,this.left,r),o=Ss(this.parentHeight,this.top,s);this.right=r,this.bottom=s,this.width=i,this.height=o},changeHeight(t){const[e,n]=fn(this.grid,0,t,1),r=nt(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom);let s=this.right;this.lockAspectRatio&&(s=this.right-(this.bottom-r)*this.aspectFactor);const i=Cs(this.parentWidth,this.left,s),o=Ss(this.parentHeight,this.top,r);this.right=s,this.bottom=r,this.width=i,this.height=o},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),Tt(document.documentElement,Rt.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?Gp:Yp}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},qp=["onMousedown","onTouchstart"];function Jp(t,e,n,r,s,i){return de(),Ce("div",{style:Gn(i.style),class:Yn([{[n.classNameActive]:t.enabled,[n.classNameDragging]:t.dragging,[n.classNameResizing]:t.resizing,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:e[0]||(e[0]=(...o)=>i.elementMouseDown&&i.elementMouseDown(...o)),onTouchstart:e[1]||(e[1]=(...o)=>i.elementTouchDown&&i.elementTouchDown(...o))},[(de(!0),Ce(Ke,null,wa(i.actualHandles,o=>(de(),Ce("div",{key:o,class:Yn([n.classNameHandle,n.classNameHandle+"-"+o]),style:Gn({display:t.enabled?"block":"none"}),onMousedown:xo(a=>i.handleDown(o,a),["stop","prevent"]),onTouchstart:xo(a=>i.handleTouchDown(o,a),["stop","prevent"])},[Ki(t.$slots,o)],46,qp))),128)),Ki(t.$slots,"default")],38)}const ol=Vp(Kp,[["render",Jp]]);function Js(t){Js.installed||(Js.installed=!0,t.component("VueDraggableResizable",ol))}const Xp={install:Js};let jr=null;typeof window<"u"?jr=window.Vue:typeof global<"u"&&(jr=global.Vue);jr&&jr.use(Xp);$f(Hp).component("vue-draggable-resizable",ol).mount("#app");
